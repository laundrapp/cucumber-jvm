//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/cucumber-jvm/core/src/main/java/cucumber/runtime/table/TablePrinter.java
//

#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "cucumber/runtime/table/TablePrinter.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuilder.h"
#include "java/util/List.h"

@interface CCBRTablePrinter () {
 @public
  IOSObjectArray *cellLengths_;
  IOSIntArray *maxLengths_;
}

- (void)calculateColumnAndMaxLengthsWithJavaUtilList:(id<JavaUtilList>)rows;

- (NSString *)getCellSafelyWithJavaUtilList:(id<JavaUtilList>)cells
                                    withInt:(jint)colIndex;

- (void)printRowWithJavaUtilList:(id<JavaUtilList>)cells
                         withInt:(jint)rowIndex
       withJavaLangStringBuilder:(JavaLangStringBuilder *)buffer;

- (NSString *)escapeCellWithNSString:(NSString *)cell;

- (void)padSpaceWithJavaLangStringBuilder:(JavaLangStringBuilder *)buffer
                                  withInt:(jint)indent;

@end

J2OBJC_FIELD_SETTER(CCBRTablePrinter, cellLengths_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(CCBRTablePrinter, maxLengths_, IOSIntArray *)

__attribute__((unused)) static void CCBRTablePrinter_calculateColumnAndMaxLengthsWithJavaUtilList_(CCBRTablePrinter *self, id<JavaUtilList> rows);

__attribute__((unused)) static NSString *CCBRTablePrinter_getCellSafelyWithJavaUtilList_withInt_(CCBRTablePrinter *self, id<JavaUtilList> cells, jint colIndex);

__attribute__((unused)) static void CCBRTablePrinter_printRowWithJavaUtilList_withInt_withJavaLangStringBuilder_(CCBRTablePrinter *self, id<JavaUtilList> cells, jint rowIndex, JavaLangStringBuilder *buffer);

__attribute__((unused)) static NSString *CCBRTablePrinter_escapeCellWithNSString_(CCBRTablePrinter *self, NSString *cell);

__attribute__((unused)) static void CCBRTablePrinter_padSpaceWithJavaLangStringBuilder_withInt_(CCBRTablePrinter *self, JavaLangStringBuilder *buffer, jint indent);

@implementation CCBRTablePrinter

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype __nonnull)init {
  CCBRTablePrinter_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)printTableWithJavaUtilList:(id<JavaUtilList>)table
         withJavaLangStringBuilder:(JavaLangStringBuilder *)result {
  CCBRTablePrinter_calculateColumnAndMaxLengthsWithJavaUtilList_(self, table);
  for (jint i = 0; i < [((id<JavaUtilList>) nil_chk(table)) size]; ++i) {
    CCBRTablePrinter_printRowWithJavaUtilList_withInt_withJavaLangStringBuilder_(self, [table getWithInt:i], i, result);
    [((JavaLangStringBuilder *) nil_chk(result)) appendWithNSString:@"\n"];
  }
}

- (void)printStartIndentWithJavaLangStringBuilder:(JavaLangStringBuilder *)buffer
                                          withInt:(jint)rowIndex {
  [((JavaLangStringBuilder *) nil_chk(buffer)) appendWithNSString:@"      "];
}

- (void)calculateColumnAndMaxLengthsWithJavaUtilList:(id<JavaUtilList>)rows {
  CCBRTablePrinter_calculateColumnAndMaxLengthsWithJavaUtilList_(self, rows);
}

- (NSString *)getCellSafelyWithJavaUtilList:(id<JavaUtilList>)cells
                                    withInt:(jint)colIndex {
  return CCBRTablePrinter_getCellSafelyWithJavaUtilList_withInt_(self, cells, colIndex);
}

- (void)printRowWithJavaUtilList:(id<JavaUtilList>)cells
                         withInt:(jint)rowIndex
       withJavaLangStringBuilder:(JavaLangStringBuilder *)buffer {
  CCBRTablePrinter_printRowWithJavaUtilList_withInt_withJavaLangStringBuilder_(self, cells, rowIndex, buffer);
}

- (NSString *)escapeCellWithNSString:(NSString *)cell {
  return CCBRTablePrinter_escapeCellWithNSString_(self, cell);
}

- (void)padSpaceWithJavaLangStringBuilder:(JavaLangStringBuilder *)buffer
                                  withInt:(jint)indent {
  CCBRTablePrinter_padSpaceWithJavaLangStringBuilder_withInt_(self, buffer, indent);
}

- (void)dealloc {
  RELEASE_(cellLengths_);
  RELEASE_(maxLengths_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 1, -1, 2, -1, -1 },
    { NULL, "V", 0x4, 3, 4, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 5, 6, -1, 7, -1, -1 },
    { NULL, "LNSString;", 0x2, 8, 9, -1, 10, -1, -1 },
    { NULL, "V", 0x2, 11, 12, -1, 13, -1, -1 },
    { NULL, "LNSString;", 0x2, 14, 15, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 16, 4, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(printTableWithJavaUtilList:withJavaLangStringBuilder:);
  methods[2].selector = @selector(printStartIndentWithJavaLangStringBuilder:withInt:);
  methods[3].selector = @selector(calculateColumnAndMaxLengthsWithJavaUtilList:);
  methods[4].selector = @selector(getCellSafelyWithJavaUtilList:withInt:);
  methods[5].selector = @selector(printRowWithJavaUtilList:withInt:withJavaLangStringBuilder:);
  methods[6].selector = @selector(escapeCellWithNSString:);
  methods[7].selector = @selector(padSpaceWithJavaLangStringBuilder:withInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "cellLengths_", "[[I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "maxLengths_", "[I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "printTable", "LJavaUtilList;LJavaLangStringBuilder;", "(Ljava/util/List<Ljava/util/List<Ljava/lang/String;>;>;Ljava/lang/StringBuilder;)V", "printStartIndent", "LJavaLangStringBuilder;I", "calculateColumnAndMaxLengths", "LJavaUtilList;", "(Ljava/util/List<Ljava/util/List<Ljava/lang/String;>;>;)V", "getCellSafely", "LJavaUtilList;I", "(Ljava/util/List<Ljava/lang/String;>;I)Ljava/lang/String;", "printRow", "LJavaUtilList;ILJavaLangStringBuilder;", "(Ljava/util/List<Ljava/lang/String;>;ILjava/lang/StringBuilder;)V", "escapeCell", "LNSString;", "padSpace" };
  static const J2ObjcClassInfo _CCBRTablePrinter = { "TablePrinter", "cucumber.runtime.table", ptrTable, methods, fields, 7, 0x1, 8, 2, -1, -1, -1, -1, -1 };
  return &_CCBRTablePrinter;
}

@end

void CCBRTablePrinter_init(CCBRTablePrinter *self) {
  NSObject_init(self);
}

CCBRTablePrinter *new_CCBRTablePrinter_init() {
  J2OBJC_NEW_IMPL(CCBRTablePrinter, init)
}

CCBRTablePrinter *create_CCBRTablePrinter_init() {
  J2OBJC_CREATE_IMPL(CCBRTablePrinter, init)
}

void CCBRTablePrinter_calculateColumnAndMaxLengthsWithJavaUtilList_(CCBRTablePrinter *self, id<JavaUtilList> rows) {
  jint columnCount = 0;
  for (id<JavaUtilList> __strong row in nil_chk(rows)) {
    if (columnCount < [((id<JavaUtilList>) nil_chk(row)) size]) {
      columnCount = [row size];
    }
  }
  JreStrongAssignAndConsume(&self->cellLengths_, [IOSIntArray newArrayWithDimensions:2 lengths:(jint[]){ [rows size], columnCount }]);
  JreStrongAssignAndConsume(&self->maxLengths_, [IOSIntArray newArrayWithLength:columnCount]);
  for (jint rowIndex = 0; rowIndex < [rows size]; rowIndex++) {
    id<JavaUtilList> cells = [rows getWithInt:rowIndex];
    for (jint colIndex = 0; colIndex < columnCount; colIndex++) {
      NSString *cell = CCBRTablePrinter_getCellSafelyWithJavaUtilList_withInt_(self, cells, colIndex);
      jint length = [((NSString *) nil_chk(CCBRTablePrinter_escapeCellWithNSString_(self, cell))) java_length];
      *IOSIntArray_GetRef(nil_chk(IOSObjectArray_Get(nil_chk(self->cellLengths_), rowIndex)), colIndex) = length;
      *IOSIntArray_GetRef(nil_chk(self->maxLengths_), colIndex) = JavaLangMath_maxWithInt_withInt_(IOSIntArray_Get(self->maxLengths_, colIndex), length);
    }
  }
}

NSString *CCBRTablePrinter_getCellSafelyWithJavaUtilList_withInt_(CCBRTablePrinter *self, id<JavaUtilList> cells, jint colIndex) {
  return (colIndex < [((id<JavaUtilList>) nil_chk(cells)) size]) ? [cells getWithInt:colIndex] : @"";
}

void CCBRTablePrinter_printRowWithJavaUtilList_withInt_withJavaLangStringBuilder_(CCBRTablePrinter *self, id<JavaUtilList> cells, jint rowIndex, JavaLangStringBuilder *buffer) {
  [self printStartIndentWithJavaLangStringBuilder:buffer withInt:rowIndex];
  [((JavaLangStringBuilder *) nil_chk(buffer)) appendWithNSString:@"| "];
  for (jint colIndex = 0; colIndex < ((IOSIntArray *) nil_chk(self->maxLengths_))->size_; colIndex++) {
    NSString *cellText = CCBRTablePrinter_escapeCellWithNSString_(self, CCBRTablePrinter_getCellSafelyWithJavaUtilList_withInt_(self, cells, colIndex));
    [buffer appendWithNSString:cellText];
    jint padding = IOSIntArray_Get(nil_chk(self->maxLengths_), colIndex) - IOSIntArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(self->cellLengths_), rowIndex)), colIndex);
    CCBRTablePrinter_padSpaceWithJavaLangStringBuilder_withInt_(self, buffer, padding);
    if (colIndex < ((IOSIntArray *) nil_chk(self->maxLengths_))->size_ - 1) {
      [buffer appendWithNSString:@" | "];
    }
    else {
      [buffer appendWithNSString:@" |"];
    }
  }
}

NSString *CCBRTablePrinter_escapeCellWithNSString_(CCBRTablePrinter *self, NSString *cell) {
  return [((NSString *) nil_chk([((NSString *) nil_chk([((NSString *) nil_chk(cell)) java_replaceAll:@"\\\\(?!\\|)" withReplacement:@"\\\\\\\\"])) java_replaceAll:@"\\n" withReplacement:@"\\\\n"])) java_replaceAll:@"\\|" withReplacement:@"\\\\|"];
}

void CCBRTablePrinter_padSpaceWithJavaLangStringBuilder_withInt_(CCBRTablePrinter *self, JavaLangStringBuilder *buffer, jint indent) {
  for (jint i = 0; i < indent; i++) {
    [((JavaLangStringBuilder *) nil_chk(buffer)) appendWithNSString:@" "];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRTablePrinter)
