//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/cucumber-jvm/core/src/main/java/cucumber/runtime/formatter/TestSourcesModel.java
//

#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "cucumber/api/event/TestSourceRead.h"
#include "cucumber/runtime/formatter/TestSourcesModel.h"
#include "gherkin/AstBuilder.h"
#include "gherkin/GherkinDialect.h"
#include "gherkin/GherkinDialectProvider.h"
#include "gherkin/Parser.h"
#include "gherkin/ParserException.h"
#include "gherkin/TokenMatcher.h"
#include "gherkin/ast/Background.h"
#include "gherkin/ast/Examples.h"
#include "gherkin/ast/Feature.h"
#include "gherkin/ast/GherkinDocument.h"
#include "gherkin/ast/Location.h"
#include "gherkin/ast/Node.h"
#include "gherkin/ast/ScenarioDefinition.h"
#include "gherkin/ast/ScenarioOutline.h"
#include "gherkin/ast/Step.h"
#include "gherkin/ast/TableRow.h"
#include "java/lang/Integer.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"

@interface CCBRTestSourcesModel () {
 @public
  id<JavaUtilMap> pathToReadEventMap_;
  id<JavaUtilMap> pathToAstMap_;
  id<JavaUtilMap> pathToNodeMap_;
}

- (CucumberApiEventTestSourceRead *)getTestSourceReadEventWithNSString:(NSString *)uri;

- (void)parseGherkinSourceWithNSString:(NSString *)path;

- (void)processScenarioDefinitionWithJavaUtilMap:(id<JavaUtilMap>)nodeMap
                      withGHKAScenarioDefinition:(GHKAScenarioDefinition *)child
                withCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)currentParent;

- (void)processScenarioOutlineExamplesWithJavaUtilMap:(id<JavaUtilMap>)nodeMap
                              withGHKAScenarioOutline:(GHKAScenarioOutline *)scenarioOutline
                     withCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)childNode;

@end

J2OBJC_FIELD_SETTER(CCBRTestSourcesModel, pathToReadEventMap_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(CCBRTestSourcesModel, pathToAstMap_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(CCBRTestSourcesModel, pathToNodeMap_, id<JavaUtilMap>)

__attribute__((unused)) static CucumberApiEventTestSourceRead *CCBRTestSourcesModel_getTestSourceReadEventWithNSString_(CCBRTestSourcesModel *self, NSString *uri);

__attribute__((unused)) static void CCBRTestSourcesModel_parseGherkinSourceWithNSString_(CCBRTestSourcesModel *self, NSString *path);

__attribute__((unused)) static void CCBRTestSourcesModel_processScenarioDefinitionWithJavaUtilMap_withGHKAScenarioDefinition_withCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel *self, id<JavaUtilMap> nodeMap, GHKAScenarioDefinition *child, CCBRTestSourcesModel_AstNode *currentParent);

__attribute__((unused)) static void CCBRTestSourcesModel_processScenarioOutlineExamplesWithJavaUtilMap_withGHKAScenarioOutline_withCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel *self, id<JavaUtilMap> nodeMap, GHKAScenarioOutline *scenarioOutline, CCBRTestSourcesModel_AstNode *childNode);

@implementation CCBRTestSourcesModel

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype __nonnull)init {
  CCBRTestSourcesModel_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (GHKAFeature *)getFeatureForTestCaseWithCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)astNode {
  return CCBRTestSourcesModel_getFeatureForTestCaseWithCCBRTestSourcesModel_AstNode_(astNode);
}

+ (GHKABackground *)getBackgroundForTestCaseWithCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)astNode {
  return CCBRTestSourcesModel_getBackgroundForTestCaseWithCCBRTestSourcesModel_AstNode_(astNode);
}

+ (GHKAScenarioDefinition *)getScenarioDefinitionWithCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)astNode {
  return CCBRTestSourcesModel_getScenarioDefinitionWithCCBRTestSourcesModel_AstNode_(astNode);
}

+ (jboolean)isScenarioOutlineScenarioWithCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)astNode {
  return CCBRTestSourcesModel_isScenarioOutlineScenarioWithCCBRTestSourcesModel_AstNode_(astNode);
}

+ (jboolean)isBackgroundStepWithCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)astNode {
  return CCBRTestSourcesModel_isBackgroundStepWithCCBRTestSourcesModel_AstNode_(astNode);
}

+ (NSString *)calculateIdWithCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)astNode {
  return CCBRTestSourcesModel_calculateIdWithCCBRTestSourcesModel_AstNode_(astNode);
}

+ (NSString *)convertToIdWithNSString:(NSString *)name {
  return CCBRTestSourcesModel_convertToIdWithNSString_(name);
}

- (void)addTestSourceReadEventWithNSString:(NSString *)path
        withCucumberApiEventTestSourceRead:(CucumberApiEventTestSourceRead *)event {
  [((id<JavaUtilMap>) nil_chk(pathToReadEventMap_)) putWithId:path withId:event];
}

- (GHKAFeature *)getFeatureWithNSString:(NSString *)path {
  if (![((id<JavaUtilMap>) nil_chk(pathToAstMap_)) containsKeyWithId:path]) {
    CCBRTestSourcesModel_parseGherkinSourceWithNSString_(self, path);
  }
  if ([pathToAstMap_ containsKeyWithId:path]) {
    return [((GHKAGherkinDocument *) nil_chk([pathToAstMap_ getWithId:path])) getFeature];
  }
  return nil;
}

- (GHKAScenarioDefinition *)getScenarioDefinitionWithNSString:(NSString *)path
                                                      withInt:(jint)line {
  return CCBRTestSourcesModel_getScenarioDefinitionWithCCBRTestSourcesModel_AstNode_([self getAstNodeWithNSString:path withInt:line]);
}

- (CCBRTestSourcesModel_AstNode *)getAstNodeWithNSString:(NSString *)path
                                                 withInt:(jint)line {
  if (![((id<JavaUtilMap>) nil_chk(pathToNodeMap_)) containsKeyWithId:path]) {
    CCBRTestSourcesModel_parseGherkinSourceWithNSString_(self, path);
  }
  if ([pathToNodeMap_ containsKeyWithId:path]) {
    return [((id<JavaUtilMap>) nil_chk([pathToNodeMap_ getWithId:path])) getWithId:JavaLangInteger_valueOfWithInt_(line)];
  }
  return nil;
}

- (jboolean)hasBackgroundWithNSString:(NSString *)path
                              withInt:(jint)line {
  if (![((id<JavaUtilMap>) nil_chk(pathToNodeMap_)) containsKeyWithId:path]) {
    CCBRTestSourcesModel_parseGherkinSourceWithNSString_(self, path);
  }
  if ([pathToNodeMap_ containsKeyWithId:path]) {
    CCBRTestSourcesModel_AstNode *astNode = [((id<JavaUtilMap>) nil_chk([pathToNodeMap_ getWithId:path])) getWithId:JavaLangInteger_valueOfWithInt_(line)];
    return CCBRTestSourcesModel_getBackgroundForTestCaseWithCCBRTestSourcesModel_AstNode_(astNode) != nil;
  }
  return false;
}

- (NSString *)getKeywordFromSourceWithNSString:(NSString *)uri
                                       withInt:(jint)stepLine {
  GHKAFeature *feature = [self getFeatureWithNSString:uri];
  if (feature != nil) {
    CucumberApiEventTestSourceRead *event = CCBRTestSourcesModel_getTestSourceReadEventWithNSString_(self, uri);
    NSString *trimmedSourceLine = [((NSString *) nil_chk(IOSObjectArray_Get(nil_chk([((NSString *) nil_chk(((CucumberApiEventTestSourceRead *) nil_chk(event))->source_)) java_split:@"\n"]), stepLine - 1))) java_trim];
    GHKGherkinDialect *dialect = [create_GHKGherkinDialectProvider_initWithNSString_([feature getLanguage]) getDefaultDialect];
    for (NSString * __strong keyword in nil_chk([((GHKGherkinDialect *) nil_chk(dialect)) getStepKeywords])) {
      if ([((NSString *) nil_chk(trimmedSourceLine)) java_hasPrefix:keyword]) {
        return keyword;
      }
    }
  }
  return @"";
}

- (CucumberApiEventTestSourceRead *)getTestSourceReadEventWithNSString:(NSString *)uri {
  return CCBRTestSourcesModel_getTestSourceReadEventWithNSString_(self, uri);
}

- (NSString *)getFeatureNameWithNSString:(NSString *)uri {
  GHKAFeature *feature = [self getFeatureWithNSString:uri];
  if (feature != nil) {
    return [feature getName];
  }
  return @"";
}

- (void)parseGherkinSourceWithNSString:(NSString *)path {
  CCBRTestSourcesModel_parseGherkinSourceWithNSString_(self, path);
}

- (void)processScenarioDefinitionWithJavaUtilMap:(id<JavaUtilMap>)nodeMap
                      withGHKAScenarioDefinition:(GHKAScenarioDefinition *)child
                withCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)currentParent {
  CCBRTestSourcesModel_processScenarioDefinitionWithJavaUtilMap_withGHKAScenarioDefinition_withCCBRTestSourcesModel_AstNode_(self, nodeMap, child, currentParent);
}

- (void)processScenarioOutlineExamplesWithJavaUtilMap:(id<JavaUtilMap>)nodeMap
                              withGHKAScenarioOutline:(GHKAScenarioOutline *)scenarioOutline
                     withCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)childNode {
  CCBRTestSourcesModel_processScenarioOutlineExamplesWithJavaUtilMap_withGHKAScenarioOutline_withCCBRTestSourcesModel_AstNode_(self, nodeMap, scenarioOutline, childNode);
}

- (void)dealloc {
  RELEASE_(pathToReadEventMap_);
  RELEASE_(pathToAstMap_);
  RELEASE_(pathToNodeMap_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "LGHKAFeature;", 0x8, 0, 1, -1, -1, -1, -1 },
    { NULL, "LGHKABackground;", 0x8, 2, 1, -1, -1, -1, -1 },
    { NULL, "LGHKAScenarioDefinition;", 0x8, 3, 1, -1, -1, -1, -1 },
    { NULL, "Z", 0x8, 4, 1, -1, -1, -1, -1 },
    { NULL, "Z", 0x8, 5, 1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x8, 6, 1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x8, 7, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 9, 10, -1, -1, -1, -1 },
    { NULL, "LGHKAFeature;", 0x0, 11, 8, -1, -1, -1, -1 },
    { NULL, "LGHKAScenarioDefinition;", 0x0, 3, 12, -1, -1, -1, -1 },
    { NULL, "LCCBRTestSourcesModel_AstNode;", 0x0, 13, 12, -1, -1, -1, -1 },
    { NULL, "Z", 0x0, 14, 12, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x0, 15, 12, -1, -1, -1, -1 },
    { NULL, "LCucumberApiEventTestSourceRead;", 0x2, 16, 8, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x0, 17, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 18, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 19, 20, -1, 21, -1, -1 },
    { NULL, "V", 0x2, 22, 23, -1, 24, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(getFeatureForTestCaseWithCCBRTestSourcesModel_AstNode:);
  methods[2].selector = @selector(getBackgroundForTestCaseWithCCBRTestSourcesModel_AstNode:);
  methods[3].selector = @selector(getScenarioDefinitionWithCCBRTestSourcesModel_AstNode:);
  methods[4].selector = @selector(isScenarioOutlineScenarioWithCCBRTestSourcesModel_AstNode:);
  methods[5].selector = @selector(isBackgroundStepWithCCBRTestSourcesModel_AstNode:);
  methods[6].selector = @selector(calculateIdWithCCBRTestSourcesModel_AstNode:);
  methods[7].selector = @selector(convertToIdWithNSString:);
  methods[8].selector = @selector(addTestSourceReadEventWithNSString:withCucumberApiEventTestSourceRead:);
  methods[9].selector = @selector(getFeatureWithNSString:);
  methods[10].selector = @selector(getScenarioDefinitionWithNSString:withInt:);
  methods[11].selector = @selector(getAstNodeWithNSString:withInt:);
  methods[12].selector = @selector(hasBackgroundWithNSString:withInt:);
  methods[13].selector = @selector(getKeywordFromSourceWithNSString:withInt:);
  methods[14].selector = @selector(getTestSourceReadEventWithNSString:);
  methods[15].selector = @selector(getFeatureNameWithNSString:);
  methods[16].selector = @selector(parseGherkinSourceWithNSString:);
  methods[17].selector = @selector(processScenarioDefinitionWithJavaUtilMap:withGHKAScenarioDefinition:withCCBRTestSourcesModel_AstNode:);
  methods[18].selector = @selector(processScenarioOutlineExamplesWithJavaUtilMap:withGHKAScenarioOutline:withCCBRTestSourcesModel_AstNode:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "pathToReadEventMap_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 25, -1 },
    { "pathToAstMap_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 26, -1 },
    { "pathToNodeMap_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 27, -1 },
  };
  static const void *ptrTable[] = { "getFeatureForTestCase", "LCCBRTestSourcesModel_AstNode;", "getBackgroundForTestCase", "getScenarioDefinition", "isScenarioOutlineScenario", "isBackgroundStep", "calculateId", "convertToId", "LNSString;", "addTestSourceReadEvent", "LNSString;LCucumberApiEventTestSourceRead;", "getFeature", "LNSString;I", "getAstNode", "hasBackground", "getKeywordFromSource", "getTestSourceReadEvent", "getFeatureName", "parseGherkinSource", "processScenarioDefinition", "LJavaUtilMap;LGHKAScenarioDefinition;LCCBRTestSourcesModel_AstNode;", "(Ljava/util/Map<Ljava/lang/Integer;Lcucumber/runtime/formatter/TestSourcesModel$AstNode;>;Lgherkin/ast/ScenarioDefinition;Lcucumber/runtime/formatter/TestSourcesModel$AstNode;)V", "processScenarioOutlineExamples", "LJavaUtilMap;LGHKAScenarioOutline;LCCBRTestSourcesModel_AstNode;", "(Ljava/util/Map<Ljava/lang/Integer;Lcucumber/runtime/formatter/TestSourcesModel$AstNode;>;Lgherkin/ast/ScenarioOutline;Lcucumber/runtime/formatter/TestSourcesModel$AstNode;)V", "Ljava/util/Map<Ljava/lang/String;Lcucumber/api/event/TestSourceRead;>;", "Ljava/util/Map<Ljava/lang/String;Lgherkin/ast/GherkinDocument;>;", "Ljava/util/Map<Ljava/lang/String;Ljava/util/Map<Ljava/lang/Integer;Lcucumber/runtime/formatter/TestSourcesModel$AstNode;>;>;", "LCCBRTestSourcesModel_ExamplesRowWrapperNode;LCCBRTestSourcesModel_AstNode;" };
  static const J2ObjcClassInfo _CCBRTestSourcesModel = { "TestSourcesModel", "cucumber.runtime.formatter", ptrTable, methods, fields, 7, 0x10, 19, 3, -1, 28, -1, -1, -1 };
  return &_CCBRTestSourcesModel;
}

@end

void CCBRTestSourcesModel_init(CCBRTestSourcesModel *self) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->pathToReadEventMap_, new_JavaUtilHashMap_init());
  JreStrongAssignAndConsume(&self->pathToAstMap_, new_JavaUtilHashMap_init());
  JreStrongAssignAndConsume(&self->pathToNodeMap_, new_JavaUtilHashMap_init());
}

CCBRTestSourcesModel *new_CCBRTestSourcesModel_init() {
  J2OBJC_NEW_IMPL(CCBRTestSourcesModel, init)
}

CCBRTestSourcesModel *create_CCBRTestSourcesModel_init() {
  J2OBJC_CREATE_IMPL(CCBRTestSourcesModel, init)
}

GHKAFeature *CCBRTestSourcesModel_getFeatureForTestCaseWithCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel_AstNode *astNode) {
  CCBRTestSourcesModel_initialize();
  while (((CCBRTestSourcesModel_AstNode *) nil_chk(astNode))->parent_ != nil) {
    astNode = astNode->parent_;
  }
  return (GHKAFeature *) cast_chk(astNode->node_, [GHKAFeature class]);
}

GHKABackground *CCBRTestSourcesModel_getBackgroundForTestCaseWithCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel_AstNode *astNode) {
  CCBRTestSourcesModel_initialize();
  GHKAFeature *feature = CCBRTestSourcesModel_getFeatureForTestCaseWithCCBRTestSourcesModel_AstNode_(astNode);
  GHKAScenarioDefinition *backgound = [((id<JavaUtilList>) nil_chk([((GHKAFeature *) nil_chk(feature)) getChildren])) getWithInt:0];
  if ([backgound isKindOfClass:[GHKABackground class]]) {
    return (GHKABackground *) cast_chk(backgound, [GHKABackground class]);
  }
  else {
    return nil;
  }
}

GHKAScenarioDefinition *CCBRTestSourcesModel_getScenarioDefinitionWithCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel_AstNode *astNode) {
  CCBRTestSourcesModel_initialize();
  return [((CCBRTestSourcesModel_AstNode *) nil_chk(astNode))->node_ isKindOfClass:[GHKAScenarioDefinition class]] ? (GHKAScenarioDefinition *) cast_chk(astNode->node_, [GHKAScenarioDefinition class]) : (GHKAScenarioDefinition *) cast_chk(((CCBRTestSourcesModel_AstNode *) nil_chk(astNode->parent_))->parent_->node_, [GHKAScenarioDefinition class]);
}

jboolean CCBRTestSourcesModel_isScenarioOutlineScenarioWithCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel_AstNode *astNode) {
  CCBRTestSourcesModel_initialize();
  return !([((CCBRTestSourcesModel_AstNode *) nil_chk(astNode))->node_ isKindOfClass:[GHKAScenarioDefinition class]]);
}

jboolean CCBRTestSourcesModel_isBackgroundStepWithCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel_AstNode *astNode) {
  CCBRTestSourcesModel_initialize();
  return [((CCBRTestSourcesModel_AstNode *) nil_chk(((CCBRTestSourcesModel_AstNode *) nil_chk(astNode))->parent_))->node_ isKindOfClass:[GHKABackground class]];
}

NSString *CCBRTestSourcesModel_calculateIdWithCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel_AstNode *astNode) {
  CCBRTestSourcesModel_initialize();
  GHKANode *node = ((CCBRTestSourcesModel_AstNode *) nil_chk(astNode))->node_;
  if ([node isKindOfClass:[GHKAScenarioDefinition class]]) {
    return JreStrcat("$C$", CCBRTestSourcesModel_calculateIdWithCCBRTestSourcesModel_AstNode_(astNode->parent_), ';', CCBRTestSourcesModel_convertToIdWithNSString_([((GHKAScenarioDefinition *) nil_chk(((GHKAScenarioDefinition *) cast_chk(node, [GHKAScenarioDefinition class])))) getName]));
  }
  if ([node isKindOfClass:[CCBRTestSourcesModel_ExamplesRowWrapperNode class]]) {
    return JreStrcat("$C$", CCBRTestSourcesModel_calculateIdWithCCBRTestSourcesModel_AstNode_(astNode->parent_), ';', JavaLangInteger_toStringWithInt_(((CCBRTestSourcesModel_ExamplesRowWrapperNode *) nil_chk(((CCBRTestSourcesModel_ExamplesRowWrapperNode *) cast_chk(node, [CCBRTestSourcesModel_ExamplesRowWrapperNode class]))))->bodyRowIndex_ + 2));
  }
  if ([node isKindOfClass:[GHKATableRow class]]) {
    return JreStrcat("$C$", CCBRTestSourcesModel_calculateIdWithCCBRTestSourcesModel_AstNode_(astNode->parent_), ';', JavaLangInteger_toStringWithInt_(1));
  }
  if ([node isKindOfClass:[GHKAExamples class]]) {
    return JreStrcat("$C$", CCBRTestSourcesModel_calculateIdWithCCBRTestSourcesModel_AstNode_(astNode->parent_), ';', CCBRTestSourcesModel_convertToIdWithNSString_([((GHKAExamples *) nil_chk(((GHKAExamples *) cast_chk(node, [GHKAExamples class])))) getName]));
  }
  if ([node isKindOfClass:[GHKAFeature class]]) {
    return CCBRTestSourcesModel_convertToIdWithNSString_([((GHKAFeature *) nil_chk(((GHKAFeature *) cast_chk(node, [GHKAFeature class])))) getName]);
  }
  return @"";
}

NSString *CCBRTestSourcesModel_convertToIdWithNSString_(NSString *name) {
  CCBRTestSourcesModel_initialize();
  return [((NSString *) nil_chk([((NSString *) nil_chk(name)) java_replaceAll:@"[\\s'_,!]" withReplacement:@"-"])) lowercaseString];
}

CucumberApiEventTestSourceRead *CCBRTestSourcesModel_getTestSourceReadEventWithNSString_(CCBRTestSourcesModel *self, NSString *uri) {
  if ([((id<JavaUtilMap>) nil_chk(self->pathToReadEventMap_)) containsKeyWithId:uri]) {
    return [self->pathToReadEventMap_ getWithId:uri];
  }
  return nil;
}

void CCBRTestSourcesModel_parseGherkinSourceWithNSString_(CCBRTestSourcesModel *self, NSString *path) {
  if (![((id<JavaUtilMap>) nil_chk(self->pathToReadEventMap_)) containsKeyWithId:path]) {
    return;
  }
  GHKParser *parser = create_GHKParser_initWithGHKParser_Builder_(create_GHKAstBuilder_init());
  GHKTokenMatcher *matcher = create_GHKTokenMatcher_init();
  @try {
    GHKAGherkinDocument *gherkinDocument = [parser parseWithNSString:((CucumberApiEventTestSourceRead *) nil_chk([self->pathToReadEventMap_ getWithId:path]))->source_ withGHKParser_ITokenMatcher:matcher];
    [((id<JavaUtilMap>) nil_chk(self->pathToAstMap_)) putWithId:path withId:gherkinDocument];
    id<JavaUtilMap> nodeMap = create_JavaUtilHashMap_init();
    CCBRTestSourcesModel_AstNode *currentParent = create_CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(self, [((GHKAGherkinDocument *) nil_chk(gherkinDocument)) getFeature], nil);
    for (GHKAScenarioDefinition * __strong child in nil_chk([((GHKAFeature *) nil_chk([gherkinDocument getFeature])) getChildren])) {
      CCBRTestSourcesModel_processScenarioDefinitionWithJavaUtilMap_withGHKAScenarioDefinition_withCCBRTestSourcesModel_AstNode_(self, nodeMap, child, currentParent);
    }
    [((id<JavaUtilMap>) nil_chk(self->pathToNodeMap_)) putWithId:path withId:nodeMap];
  }
  @catch (GHKParserException *e) {
  }
}

void CCBRTestSourcesModel_processScenarioDefinitionWithJavaUtilMap_withGHKAScenarioDefinition_withCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel *self, id<JavaUtilMap> nodeMap, GHKAScenarioDefinition *child, CCBRTestSourcesModel_AstNode *currentParent) {
  CCBRTestSourcesModel_AstNode *childNode = create_CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(self, child, currentParent);
  [((id<JavaUtilMap>) nil_chk(nodeMap)) putWithId:JavaLangInteger_valueOfWithInt_([((GHKALocation *) nil_chk([((GHKAScenarioDefinition *) nil_chk(child)) getLocation])) getLine]) withId:childNode];
  for (GHKAStep * __strong step in nil_chk([child getSteps])) {
    [nodeMap putWithId:JavaLangInteger_valueOfWithInt_([((GHKALocation *) nil_chk([((GHKAStep *) nil_chk(step)) getLocation])) getLine]) withId:create_CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(self, step, childNode)];
  }
  if ([child isKindOfClass:[GHKAScenarioOutline class]]) {
    CCBRTestSourcesModel_processScenarioOutlineExamplesWithJavaUtilMap_withGHKAScenarioOutline_withCCBRTestSourcesModel_AstNode_(self, nodeMap, (GHKAScenarioOutline *) cast_chk(child, [GHKAScenarioOutline class]), childNode);
  }
}

void CCBRTestSourcesModel_processScenarioOutlineExamplesWithJavaUtilMap_withGHKAScenarioOutline_withCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel *self, id<JavaUtilMap> nodeMap, GHKAScenarioOutline *scenarioOutline, CCBRTestSourcesModel_AstNode *childNode) {
  for (GHKAExamples * __strong examples in nil_chk([((GHKAScenarioOutline *) nil_chk(scenarioOutline)) getExamples])) {
    CCBRTestSourcesModel_AstNode *examplesNode = create_CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(self, examples, childNode);
    GHKATableRow *headerRow = [((GHKAExamples *) nil_chk(examples)) getTableHeader];
    CCBRTestSourcesModel_AstNode *headerNode = create_CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(self, headerRow, examplesNode);
    [((id<JavaUtilMap>) nil_chk(nodeMap)) putWithId:JavaLangInteger_valueOfWithInt_([((GHKALocation *) nil_chk([((GHKATableRow *) nil_chk(headerRow)) getLocation])) getLine]) withId:headerNode];
    for (jint i = 0; i < [((id<JavaUtilList>) nil_chk([examples getTableBody])) size]; ++i) {
      GHKATableRow *examplesRow = [((id<JavaUtilList>) nil_chk([examples getTableBody])) getWithInt:i];
      GHKANode *rowNode = create_CCBRTestSourcesModel_ExamplesRowWrapperNode_initWithCCBRTestSourcesModel_withGHKANode_withInt_(self, examplesRow, i);
      CCBRTestSourcesModel_AstNode *expandedScenarioNode = create_CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(self, rowNode, examplesNode);
      [nodeMap putWithId:JavaLangInteger_valueOfWithInt_([((GHKALocation *) nil_chk([((GHKATableRow *) nil_chk(examplesRow)) getLocation])) getLine]) withId:expandedScenarioNode];
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRTestSourcesModel)

@implementation CCBRTestSourcesModel_ExamplesRowWrapperNode

- (instancetype __nonnull)initWithCCBRTestSourcesModel:(CCBRTestSourcesModel *)outer$
                                          withGHKANode:(GHKANode *)examplesRow
                                               withInt:(jint)bodyRowIndex {
  CCBRTestSourcesModel_ExamplesRowWrapperNode_initWithCCBRTestSourcesModel_withGHKANode_withInt_(self, outer$, examplesRow, bodyRowIndex);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithCCBRTestSourcesModel:withGHKANode:withInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "bodyRowIndex_", "I", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LGHKANode;I", "LCCBRTestSourcesModel;" };
  static const J2ObjcClassInfo _CCBRTestSourcesModel_ExamplesRowWrapperNode = { "ExamplesRowWrapperNode", "cucumber.runtime.formatter", ptrTable, methods, fields, 7, 0x0, 1, 1, 1, -1, -1, -1, -1 };
  return &_CCBRTestSourcesModel_ExamplesRowWrapperNode;
}

@end

void CCBRTestSourcesModel_ExamplesRowWrapperNode_initWithCCBRTestSourcesModel_withGHKANode_withInt_(CCBRTestSourcesModel_ExamplesRowWrapperNode *self, CCBRTestSourcesModel *outer$, GHKANode *examplesRow, jint bodyRowIndex) {
  GHKANode_initWithGHKALocation_(self, [((GHKANode *) nil_chk(examplesRow)) getLocation]);
  self->bodyRowIndex_ = bodyRowIndex;
}

CCBRTestSourcesModel_ExamplesRowWrapperNode *new_CCBRTestSourcesModel_ExamplesRowWrapperNode_initWithCCBRTestSourcesModel_withGHKANode_withInt_(CCBRTestSourcesModel *outer$, GHKANode *examplesRow, jint bodyRowIndex) {
  J2OBJC_NEW_IMPL(CCBRTestSourcesModel_ExamplesRowWrapperNode, initWithCCBRTestSourcesModel_withGHKANode_withInt_, outer$, examplesRow, bodyRowIndex)
}

CCBRTestSourcesModel_ExamplesRowWrapperNode *create_CCBRTestSourcesModel_ExamplesRowWrapperNode_initWithCCBRTestSourcesModel_withGHKANode_withInt_(CCBRTestSourcesModel *outer$, GHKANode *examplesRow, jint bodyRowIndex) {
  J2OBJC_CREATE_IMPL(CCBRTestSourcesModel_ExamplesRowWrapperNode, initWithCCBRTestSourcesModel_withGHKANode_withInt_, outer$, examplesRow, bodyRowIndex)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRTestSourcesModel_ExamplesRowWrapperNode)

@implementation CCBRTestSourcesModel_AstNode

- (instancetype __nonnull)initWithCCBRTestSourcesModel:(CCBRTestSourcesModel *)outer$
                                          withGHKANode:(GHKANode *)node
                      withCCBRTestSourcesModel_AstNode:(CCBRTestSourcesModel_AstNode *)parent {
  CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(self, outer$, node, parent);
  return self;
}

- (void)dealloc {
  RELEASE_(node_);
  RELEASE_(parent_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithCCBRTestSourcesModel:withGHKANode:withCCBRTestSourcesModel_AstNode:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "node_", "LGHKANode;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "parent_", "LCCBRTestSourcesModel_AstNode;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LGHKANode;LCCBRTestSourcesModel_AstNode;", "LCCBRTestSourcesModel;" };
  static const J2ObjcClassInfo _CCBRTestSourcesModel_AstNode = { "AstNode", "cucumber.runtime.formatter", ptrTable, methods, fields, 7, 0x0, 1, 2, 1, -1, -1, -1, -1 };
  return &_CCBRTestSourcesModel_AstNode;
}

@end

void CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel_AstNode *self, CCBRTestSourcesModel *outer$, GHKANode *node, CCBRTestSourcesModel_AstNode *parent) {
  NSObject_init(self);
  JreStrongAssign(&self->node_, node);
  JreStrongAssign(&self->parent_, parent);
}

CCBRTestSourcesModel_AstNode *new_CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel *outer$, GHKANode *node, CCBRTestSourcesModel_AstNode *parent) {
  J2OBJC_NEW_IMPL(CCBRTestSourcesModel_AstNode, initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_, outer$, node, parent)
}

CCBRTestSourcesModel_AstNode *create_CCBRTestSourcesModel_AstNode_initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_(CCBRTestSourcesModel *outer$, GHKANode *node, CCBRTestSourcesModel_AstNode *parent) {
  J2OBJC_CREATE_IMPL(CCBRTestSourcesModel_AstNode, initWithCCBRTestSourcesModel_withGHKANode_withCCBRTestSourcesModel_AstNode_, outer$, node, parent)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRTestSourcesModel_AstNode)
