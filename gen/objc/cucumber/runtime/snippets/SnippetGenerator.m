//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/marcussmith/HambroPerks/laundrapp_org/cucumber-jvm/core/src/main/java/cucumber/runtime/snippets/SnippetGenerator.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "cucumber/api/DataTable.h"
#include "cucumber/runtime/snippets/ArgumentPattern.h"
#include "cucumber/runtime/snippets/FunctionNameGenerator.h"
#include "cucumber/runtime/snippets/Snippet.h"
#include "cucumber/runtime/snippets/SnippetGenerator.h"
#include "gherkin/pickles/Argument.h"
#include "gherkin/pickles/PickleStep.h"
#include "gherkin/pickles/PickleString.h"
#include "gherkin/pickles/PickleTable.h"
#include "java/lang/Integer.h"
#include "java/lang/StringBuffer.h"
#include "java/lang/StringBuilder.h"
#include "java/text/MessageFormat.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"
#include "java/util/regex/Matcher.h"
#include "java/util/regex/Pattern.h"

@interface CucumberRuntimeSnippetsSnippetGenerator () {
 @public
  id<CucumberRuntimeSnippetsSnippet> snippet_;
}

- (NSString *)functionNameWithNSString:(NSString *)sentence
withCucumberRuntimeSnippetsFunctionNameGenerator:(CucumberRuntimeSnippetsFunctionNameGenerator *)functionNameGenerator;

- (NSString *)withNamedGroupsWithNSString:(NSString *)snippetPattern;

- (id<JavaUtilList>)argumentTypesWithGherkinPicklesPickleStep:(GherkinPicklesPickleStep *)step;

@end

J2OBJC_FIELD_SETTER(CucumberRuntimeSnippetsSnippetGenerator, snippet_, id<CucumberRuntimeSnippetsSnippet>)

inline IOSObjectArray *CucumberRuntimeSnippetsSnippetGenerator_get_DEFAULT_ARGUMENT_PATTERNS(void);
static IOSObjectArray *CucumberRuntimeSnippetsSnippetGenerator_DEFAULT_ARGUMENT_PATTERNS;
J2OBJC_STATIC_FIELD_OBJ_FINAL(CucumberRuntimeSnippetsSnippetGenerator, DEFAULT_ARGUMENT_PATTERNS, IOSObjectArray *)

inline JavaUtilRegexPattern *CucumberRuntimeSnippetsSnippetGenerator_get_GROUP_PATTERN(void);
static JavaUtilRegexPattern *CucumberRuntimeSnippetsSnippetGenerator_GROUP_PATTERN;
J2OBJC_STATIC_FIELD_OBJ_FINAL(CucumberRuntimeSnippetsSnippetGenerator, GROUP_PATTERN, JavaUtilRegexPattern *)

inline IOSObjectArray *CucumberRuntimeSnippetsSnippetGenerator_get_ESCAPE_PATTERNS(void);
static IOSObjectArray *CucumberRuntimeSnippetsSnippetGenerator_ESCAPE_PATTERNS;
J2OBJC_STATIC_FIELD_OBJ_FINAL(CucumberRuntimeSnippetsSnippetGenerator, ESCAPE_PATTERNS, IOSObjectArray *)

inline NSString *CucumberRuntimeSnippetsSnippetGenerator_get_REGEXP_HINT(void);
static NSString *CucumberRuntimeSnippetsSnippetGenerator_REGEXP_HINT = @"Write code here that turns the phrase above into concrete actions";
J2OBJC_STATIC_FIELD_OBJ_FINAL(CucumberRuntimeSnippetsSnippetGenerator, REGEXP_HINT, NSString *)

__attribute__((unused)) static NSString *CucumberRuntimeSnippetsSnippetGenerator_functionNameWithNSString_withCucumberRuntimeSnippetsFunctionNameGenerator_(CucumberRuntimeSnippetsSnippetGenerator *self, NSString *sentence, CucumberRuntimeSnippetsFunctionNameGenerator *functionNameGenerator);

__attribute__((unused)) static NSString *CucumberRuntimeSnippetsSnippetGenerator_withNamedGroupsWithNSString_(CucumberRuntimeSnippetsSnippetGenerator *self, NSString *snippetPattern);

__attribute__((unused)) static id<JavaUtilList> CucumberRuntimeSnippetsSnippetGenerator_argumentTypesWithGherkinPicklesPickleStep_(CucumberRuntimeSnippetsSnippetGenerator *self, GherkinPicklesPickleStep *step);

J2OBJC_INITIALIZED_DEFN(CucumberRuntimeSnippetsSnippetGenerator)

@implementation CucumberRuntimeSnippetsSnippetGenerator

- (instancetype)initWithCucumberRuntimeSnippetsSnippet:(id<CucumberRuntimeSnippetsSnippet>)snippet {
  CucumberRuntimeSnippetsSnippetGenerator_initWithCucumberRuntimeSnippetsSnippet_(self, snippet);
  return self;
}

- (NSString *)getSnippetWithGherkinPicklesPickleStep:(GherkinPicklesPickleStep *)step
                                        withNSString:(NSString *)keyword
    withCucumberRuntimeSnippetsFunctionNameGenerator:(CucumberRuntimeSnippetsFunctionNameGenerator *)functionNameGenerator {
  return JavaTextMessageFormat_formatWithNSString_withNSObjectArray_([((id<CucumberRuntimeSnippetsSnippet>) nil_chk(snippet_)) template__], [IOSObjectArray arrayWithObjects:(id[]){ keyword, [snippet_ escapePatternWithNSString:[self patternForWithNSString:[((GherkinPicklesPickleStep *) nil_chk(step)) getText]]], CucumberRuntimeSnippetsSnippetGenerator_functionNameWithNSString_withCucumberRuntimeSnippetsFunctionNameGenerator_(self, [step getText], functionNameGenerator), [snippet_ argumentsWithJavaUtilList:CucumberRuntimeSnippetsSnippetGenerator_argumentTypesWithGherkinPicklesPickleStep_(self, step)], CucumberRuntimeSnippetsSnippetGenerator_REGEXP_HINT, ![((id<JavaUtilList>) nil_chk([step getArgument])) isEmpty] && [[((id<JavaUtilList>) nil_chk([step getArgument])) getWithInt:0] isKindOfClass:[GherkinPicklesPickleTable class]] ? [snippet_ tableHint] : @"" } count:6 type:NSObject_class_()]);
}

- (NSString *)patternForWithNSString:(NSString *)stepName {
  NSString *pattern = stepName;
  {
    IOSObjectArray *a__ = CucumberRuntimeSnippetsSnippetGenerator_ESCAPE_PATTERNS;
    JavaUtilRegexPattern * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    JavaUtilRegexPattern * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      JavaUtilRegexPattern *escapePattern = *b__++;
      JavaUtilRegexMatcher *m = [((JavaUtilRegexPattern *) nil_chk(escapePattern)) matcherWithJavaLangCharSequence:pattern];
      NSString *replacement = JavaUtilRegexMatcher_quoteReplacementWithNSString_([escapePattern description]);
      pattern = [((JavaUtilRegexMatcher *) nil_chk(m)) replaceAllWithNSString:replacement];
    }
  }
  {
    IOSObjectArray *a__ = [self argumentPatterns];
    CucumberRuntimeSnippetsArgumentPattern * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    CucumberRuntimeSnippetsArgumentPattern * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      CucumberRuntimeSnippetsArgumentPattern *argumentPattern = *b__++;
      pattern = [((CucumberRuntimeSnippetsArgumentPattern *) nil_chk(argumentPattern)) replaceMatchesWithGroupsWithNSString:pattern];
    }
  }
  if ([((id<CucumberRuntimeSnippetsSnippet>) nil_chk(snippet_)) namedGroupStart] != nil) {
    pattern = CucumberRuntimeSnippetsSnippetGenerator_withNamedGroupsWithNSString_(self, pattern);
  }
  return JreStrcat("C$C", '^', pattern, '$');
}

- (NSString *)functionNameWithNSString:(NSString *)sentence
withCucumberRuntimeSnippetsFunctionNameGenerator:(CucumberRuntimeSnippetsFunctionNameGenerator *)functionNameGenerator {
  return CucumberRuntimeSnippetsSnippetGenerator_functionNameWithNSString_withCucumberRuntimeSnippetsFunctionNameGenerator_(self, sentence, functionNameGenerator);
}

- (NSString *)withNamedGroupsWithNSString:(NSString *)snippetPattern {
  return CucumberRuntimeSnippetsSnippetGenerator_withNamedGroupsWithNSString_(self, snippetPattern);
}

- (id<JavaUtilList>)argumentTypesWithGherkinPicklesPickleStep:(GherkinPicklesPickleStep *)step {
  return CucumberRuntimeSnippetsSnippetGenerator_argumentTypesWithGherkinPicklesPickleStep_(self, step);
}

- (IOSObjectArray *)argumentPatterns {
  return CucumberRuntimeSnippetsSnippetGenerator_DEFAULT_ARGUMENT_PATTERNS;
}

+ (NSString *)untypedArgumentsWithJavaUtilList:(id<JavaUtilList>)argumentTypes {
  return CucumberRuntimeSnippetsSnippetGenerator_untypedArgumentsWithJavaUtilList_(argumentTypes);
}

- (void)dealloc {
  RELEASE_(snippet_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, 1, 2, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x0, 3, 4, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x2, 5, 6, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x2, 7, 4, -1, -1, -1, -1 },
    { NULL, "LJavaUtilList;", 0x2, 8, 9, -1, 10, -1, -1 },
    { NULL, "[LCucumberRuntimeSnippetsArgumentPattern;", 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x9, 11, 12, -1, 13, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(initWithCucumberRuntimeSnippetsSnippet:);
  methods[1].selector = @selector(getSnippetWithGherkinPicklesPickleStep:withNSString:withCucumberRuntimeSnippetsFunctionNameGenerator:);
  methods[2].selector = @selector(patternForWithNSString:);
  methods[3].selector = @selector(functionNameWithNSString:withCucumberRuntimeSnippetsFunctionNameGenerator:);
  methods[4].selector = @selector(withNamedGroupsWithNSString:);
  methods[5].selector = @selector(argumentTypesWithGherkinPicklesPickleStep:);
  methods[6].selector = @selector(argumentPatterns);
  methods[7].selector = @selector(untypedArgumentsWithJavaUtilList:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "DEFAULT_ARGUMENT_PATTERNS", "[LCucumberRuntimeSnippetsArgumentPattern;", .constantValue.asLong = 0, 0x1a, -1, 14, -1, -1 },
    { "GROUP_PATTERN", "LJavaUtilRegexPattern;", .constantValue.asLong = 0, 0x1a, -1, 15, -1, -1 },
    { "ESCAPE_PATTERNS", "[LJavaUtilRegexPattern;", .constantValue.asLong = 0, 0x1a, -1, 16, -1, -1 },
    { "REGEXP_HINT", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 17, -1, -1 },
    { "snippet_", "LCucumberRuntimeSnippetsSnippet;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LCucumberRuntimeSnippetsSnippet;", "getSnippet", "LGherkinPicklesPickleStep;LNSString;LCucumberRuntimeSnippetsFunctionNameGenerator;", "patternFor", "LNSString;", "functionName", "LNSString;LCucumberRuntimeSnippetsFunctionNameGenerator;", "withNamedGroups", "argumentTypes", "LGherkinPicklesPickleStep;", "(Lgherkin/pickles/PickleStep;)Ljava/util/List<Ljava/lang/Class<*>;>;", "untypedArguments", "LJavaUtilList;", "(Ljava/util/List<Ljava/lang/Class<*>;>;)Ljava/lang/String;", &CucumberRuntimeSnippetsSnippetGenerator_DEFAULT_ARGUMENT_PATTERNS, &CucumberRuntimeSnippetsSnippetGenerator_GROUP_PATTERN, &CucumberRuntimeSnippetsSnippetGenerator_ESCAPE_PATTERNS, &CucumberRuntimeSnippetsSnippetGenerator_REGEXP_HINT };
  static const J2ObjcClassInfo _CucumberRuntimeSnippetsSnippetGenerator = { "SnippetGenerator", "cucumber.runtime.snippets", ptrTable, methods, fields, 7, 0x1, 8, 5, -1, -1, -1, -1, -1 };
  return &_CucumberRuntimeSnippetsSnippetGenerator;
}

+ (void)initialize {
  if (self == [CucumberRuntimeSnippetsSnippetGenerator class]) {
    JreStrongAssignAndConsume(&CucumberRuntimeSnippetsSnippetGenerator_DEFAULT_ARGUMENT_PATTERNS, [IOSObjectArray newArrayWithObjects:(id[]){ create_CucumberRuntimeSnippetsArgumentPattern_initWithJavaUtilRegexPattern_withIOSClass_(JavaUtilRegexPattern_compileWithNSString_(@"\"([^\"]*)\""), NSString_class_()), create_CucumberRuntimeSnippetsArgumentPattern_initWithJavaUtilRegexPattern_withIOSClass_(JavaUtilRegexPattern_compileWithNSString_(@"(\\d+)"), JreLoadStatic(JavaLangInteger, TYPE)), create_CucumberRuntimeSnippetsArgumentPattern_initWithJavaUtilRegexPattern_withNSString_withIOSClass_(JavaUtilRegexPattern_compileWithNSString_(@"<([^>]*)>"), @"(.*)", NSString_class_()) } count:3 type:CucumberRuntimeSnippetsArgumentPattern_class_()]);
    JreStrongAssign(&CucumberRuntimeSnippetsSnippetGenerator_GROUP_PATTERN, JavaUtilRegexPattern_compileWithNSString_(@"\\("));
    JreStrongAssignAndConsume(&CucumberRuntimeSnippetsSnippetGenerator_ESCAPE_PATTERNS, [IOSObjectArray newArrayWithObjects:(id[]){ JavaUtilRegexPattern_compileWithNSString_(@"\\$"), JavaUtilRegexPattern_compileWithNSString_(@"\\("), JavaUtilRegexPattern_compileWithNSString_(@"\\)"), JavaUtilRegexPattern_compileWithNSString_(@"\\["), JavaUtilRegexPattern_compileWithNSString_(@"\\]"), JavaUtilRegexPattern_compileWithNSString_(@"\\?"), JavaUtilRegexPattern_compileWithNSString_(@"\\*"), JavaUtilRegexPattern_compileWithNSString_(@"\\+"), JavaUtilRegexPattern_compileWithNSString_(@"\\."), JavaUtilRegexPattern_compileWithNSString_(@"\\^") } count:10 type:JavaUtilRegexPattern_class_()]);
    J2OBJC_SET_INITIALIZED(CucumberRuntimeSnippetsSnippetGenerator)
  }
}

@end

void CucumberRuntimeSnippetsSnippetGenerator_initWithCucumberRuntimeSnippetsSnippet_(CucumberRuntimeSnippetsSnippetGenerator *self, id<CucumberRuntimeSnippetsSnippet> snippet) {
  NSObject_init(self);
  JreStrongAssign(&self->snippet_, snippet);
}

CucumberRuntimeSnippetsSnippetGenerator *new_CucumberRuntimeSnippetsSnippetGenerator_initWithCucumberRuntimeSnippetsSnippet_(id<CucumberRuntimeSnippetsSnippet> snippet) {
  J2OBJC_NEW_IMPL(CucumberRuntimeSnippetsSnippetGenerator, initWithCucumberRuntimeSnippetsSnippet_, snippet)
}

CucumberRuntimeSnippetsSnippetGenerator *create_CucumberRuntimeSnippetsSnippetGenerator_initWithCucumberRuntimeSnippetsSnippet_(id<CucumberRuntimeSnippetsSnippet> snippet) {
  J2OBJC_CREATE_IMPL(CucumberRuntimeSnippetsSnippetGenerator, initWithCucumberRuntimeSnippetsSnippet_, snippet)
}

NSString *CucumberRuntimeSnippetsSnippetGenerator_functionNameWithNSString_withCucumberRuntimeSnippetsFunctionNameGenerator_(CucumberRuntimeSnippetsSnippetGenerator *self, NSString *sentence, CucumberRuntimeSnippetsFunctionNameGenerator *functionNameGenerator) {
  if (functionNameGenerator == nil) {
    return nil;
  }
  {
    IOSObjectArray *a__ = [self argumentPatterns];
    CucumberRuntimeSnippetsArgumentPattern * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    CucumberRuntimeSnippetsArgumentPattern * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      CucumberRuntimeSnippetsArgumentPattern *argumentPattern = *b__++;
      sentence = [((CucumberRuntimeSnippetsArgumentPattern *) nil_chk(argumentPattern)) replaceMatchesWithSpaceWithNSString:sentence];
    }
  }
  return [functionNameGenerator generateFunctionNameWithNSString:sentence];
}

NSString *CucumberRuntimeSnippetsSnippetGenerator_withNamedGroupsWithNSString_(CucumberRuntimeSnippetsSnippetGenerator *self, NSString *snippetPattern) {
  JavaUtilRegexMatcher *m = [((JavaUtilRegexPattern *) nil_chk(CucumberRuntimeSnippetsSnippetGenerator_GROUP_PATTERN)) matcherWithJavaLangCharSequence:snippetPattern];
  JavaLangStringBuffer *sb = create_JavaLangStringBuffer_init();
  jint n = 1;
  while ([((JavaUtilRegexMatcher *) nil_chk(m)) find]) {
    [m appendReplacementWithJavaLangStringBuffer:sb withNSString:JreStrcat("C$I$", '(', [((id<CucumberRuntimeSnippetsSnippet>) nil_chk(self->snippet_)) namedGroupStart], n++, [self->snippet_ namedGroupEnd])];
  }
  [m appendTailWithJavaLangStringBuffer:sb];
  return [sb description];
}

id<JavaUtilList> CucumberRuntimeSnippetsSnippetGenerator_argumentTypesWithGherkinPicklesPickleStep_(CucumberRuntimeSnippetsSnippetGenerator *self, GherkinPicklesPickleStep *step) {
  NSString *name = [((GherkinPicklesPickleStep *) nil_chk(step)) getText];
  id<JavaUtilList> argTypes = create_JavaUtilArrayList_init();
  IOSObjectArray *matchers = [IOSObjectArray arrayWithLength:((IOSObjectArray *) nil_chk([self argumentPatterns]))->size_ type:JavaUtilRegexMatcher_class_()];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk([self argumentPatterns]))->size_; i++) {
    IOSObjectArray_Set(matchers, i, [((JavaUtilRegexPattern *) nil_chk([((CucumberRuntimeSnippetsArgumentPattern *) nil_chk(IOSObjectArray_Get(nil_chk([self argumentPatterns]), i))) pattern])) matcherWithJavaLangCharSequence:name]);
  }
  jint pos = 0;
  while (true) {
    jint matchedLength = 1;
    for (jint i = 0; i < matchers->size_; i++) {
      JavaUtilRegexMatcher *m = [((JavaUtilRegexMatcher *) nil_chk(IOSObjectArray_Get(matchers, i))) regionWithInt:pos withInt:[((NSString *) nil_chk(name)) java_length]];
      if ([((JavaUtilRegexMatcher *) nil_chk(m)) lookingAt]) {
        IOSClass *typeForSignature = [((CucumberRuntimeSnippetsArgumentPattern *) nil_chk(IOSObjectArray_Get(nil_chk([self argumentPatterns]), i))) type];
        [argTypes addWithId:typeForSignature];
        matchedLength = [((NSString *) nil_chk([m group])) java_length];
        break;
      }
    }
    pos += matchedLength;
    if (pos == [((NSString *) nil_chk(name)) java_length]) {
      break;
    }
  }
  if (![((id<JavaUtilList>) nil_chk([step getArgument])) isEmpty]) {
    id<GherkinPicklesArgument> arg = [((id<JavaUtilList>) nil_chk([step getArgument])) getWithInt:0];
    if ([arg isKindOfClass:[GherkinPicklesPickleString class]]) {
      [argTypes addWithId:NSString_class_()];
    }
    if ([arg isKindOfClass:[GherkinPicklesPickleTable class]]) {
      [argTypes addWithId:CucumberApiDataTable_class_()];
    }
  }
  return argTypes;
}

NSString *CucumberRuntimeSnippetsSnippetGenerator_untypedArgumentsWithJavaUtilList_(id<JavaUtilList> argumentTypes) {
  CucumberRuntimeSnippetsSnippetGenerator_initialize();
  JavaLangStringBuilder *sb = create_JavaLangStringBuilder_init();
  for (jint n = 0; n < [((id<JavaUtilList>) nil_chk(argumentTypes)) size]; n++) {
    if (n > 0) {
      [sb appendWithNSString:@", "];
    }
    [((JavaLangStringBuilder *) nil_chk([sb appendWithNSString:@"arg"])) appendWithInt:n + 1];
  }
  return [sb description];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CucumberRuntimeSnippetsSnippetGenerator)
