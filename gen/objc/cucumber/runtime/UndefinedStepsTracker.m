//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/cucumber-jvm/core/src/main/java/cucumber/runtime/UndefinedStepsTracker.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "cucumber/api/event/EventHandler.h"
#include "cucumber/api/event/EventPublisher.h"
#include "cucumber/api/event/SnippetsSuggestedEvent.h"
#include "cucumber/api/event/TestSourceRead.h"
#include "cucumber/runtime/UndefinedStepsTracker.h"
#include "gherkin/AstBuilder.h"
#include "gherkin/GherkinDialect.h"
#include "gherkin/GherkinDialectProvider.h"
#include "gherkin/IGherkinDialectProvider.h"
#include "gherkin/Parser.h"
#include "gherkin/ParserException.h"
#include "gherkin/TokenMatcher.h"
#include "gherkin/ast/Background.h"
#include "gherkin/ast/Feature.h"
#include "gherkin/ast/GherkinDocument.h"
#include "gherkin/ast/Location.h"
#include "gherkin/ast/ScenarioDefinition.h"
#include "gherkin/ast/Step.h"
#include "gherkin/pickles/PickleLocation.h"
#include "java/lang/Integer.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"

@class CCBRUndefinedStepsTracker_StepNode;

@interface CCBRUndefinedStepsTracker () {
 @public
  id<JavaUtilList> snippets_;
  id<GherkinIGherkinDialectProvider> dialectProvider_;
  id<JavaUtilMap> pathToSourceMap_;
  id<JavaUtilMap> pathToStepMap_;
  jboolean hasUndefinedSteps_;
  id<CucumberApiEventEventHandler> testSourceReadHandler_;
  id<CucumberApiEventEventHandler> snippetsSuggestedHandler_;
}

- (NSString *)givenWhenThenKeywordWithNSString:(NSString *)uri
                              withJavaUtilList:(id<JavaUtilList>)stepLocations;

- (NSString *)getKeywordFromSourceWithNSString:(NSString *)path
                              withJavaUtilList:(id<JavaUtilList>)stepLocations;

- (void)createFeatureStepMapWithNSString:(NSString *)path;

- (CCBRUndefinedStepsTracker_StepNode *)processScenarioDefinitionWithJavaUtilMap:(id<JavaUtilMap>)stepMap
                                          withCCBRUndefinedStepsTracker_StepNode:(CCBRUndefinedStepsTracker_StepNode *)initialPreviousNode
                                                withGherkinAstScenarioDefinition:(GherkinAstScenarioDefinition *)child;

- (id<JavaUtilList>)getGivenWhenThenKeywordsWithGherkinGherkinDialect:(GherkinGherkinDialect *)dialect;

- (NSString *)getFirstGivenKeywordWithGherkinGherkinDialect:(GherkinGherkinDialect *)i18n;

- (NSString *)convertToCodeKeywordWithNSString:(NSString *)keyword;

@end

J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker, snippets_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker, dialectProvider_, id<GherkinIGherkinDialectProvider>)
J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker, pathToSourceMap_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker, pathToStepMap_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker, testSourceReadHandler_, id<CucumberApiEventEventHandler>)
J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker, snippetsSuggestedHandler_, id<CucumberApiEventEventHandler>)

__attribute__((unused)) static NSString *CCBRUndefinedStepsTracker_givenWhenThenKeywordWithNSString_withJavaUtilList_(CCBRUndefinedStepsTracker *self, NSString *uri, id<JavaUtilList> stepLocations);

__attribute__((unused)) static NSString *CCBRUndefinedStepsTracker_getKeywordFromSourceWithNSString_withJavaUtilList_(CCBRUndefinedStepsTracker *self, NSString *path, id<JavaUtilList> stepLocations);

__attribute__((unused)) static void CCBRUndefinedStepsTracker_createFeatureStepMapWithNSString_(CCBRUndefinedStepsTracker *self, NSString *path);

__attribute__((unused)) static CCBRUndefinedStepsTracker_StepNode *CCBRUndefinedStepsTracker_processScenarioDefinitionWithJavaUtilMap_withCCBRUndefinedStepsTracker_StepNode_withGherkinAstScenarioDefinition_(CCBRUndefinedStepsTracker *self, id<JavaUtilMap> stepMap, CCBRUndefinedStepsTracker_StepNode *initialPreviousNode, GherkinAstScenarioDefinition *child);

__attribute__((unused)) static id<JavaUtilList> CCBRUndefinedStepsTracker_getGivenWhenThenKeywordsWithGherkinGherkinDialect_(CCBRUndefinedStepsTracker *self, GherkinGherkinDialect *dialect);

__attribute__((unused)) static NSString *CCBRUndefinedStepsTracker_getFirstGivenKeywordWithGherkinGherkinDialect_(CCBRUndefinedStepsTracker *self, GherkinGherkinDialect *i18n);

__attribute__((unused)) static NSString *CCBRUndefinedStepsTracker_convertToCodeKeywordWithNSString_(CCBRUndefinedStepsTracker *self, NSString *keyword);

@interface CCBRUndefinedStepsTracker_1 : NSObject < CucumberApiEventEventHandler > {
 @public
  CCBRUndefinedStepsTracker *this$0_;
}

- (instancetype __nonnull)initWithCCBRUndefinedStepsTracker:(CCBRUndefinedStepsTracker *)outer$;

- (void)receiveWithCucumberApiEventEvent:(CucumberApiEventTestSourceRead *)event;

@end

J2OBJC_EMPTY_STATIC_INIT(CCBRUndefinedStepsTracker_1)

__attribute__((unused)) static void CCBRUndefinedStepsTracker_1_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker_1 *self, CCBRUndefinedStepsTracker *outer$);

__attribute__((unused)) static CCBRUndefinedStepsTracker_1 *new_CCBRUndefinedStepsTracker_1_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static CCBRUndefinedStepsTracker_1 *create_CCBRUndefinedStepsTracker_1_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker *outer$);

@interface CCBRUndefinedStepsTracker_2 : NSObject < CucumberApiEventEventHandler > {
 @public
  CCBRUndefinedStepsTracker *this$0_;
}

- (instancetype __nonnull)initWithCCBRUndefinedStepsTracker:(CCBRUndefinedStepsTracker *)outer$;

- (void)receiveWithCucumberApiEventEvent:(CucumberApiEventSnippetsSuggestedEvent *)event;

@end

J2OBJC_EMPTY_STATIC_INIT(CCBRUndefinedStepsTracker_2)

__attribute__((unused)) static void CCBRUndefinedStepsTracker_2_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker_2 *self, CCBRUndefinedStepsTracker *outer$);

__attribute__((unused)) static CCBRUndefinedStepsTracker_2 *new_CCBRUndefinedStepsTracker_2_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static CCBRUndefinedStepsTracker_2 *create_CCBRUndefinedStepsTracker_2_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker *outer$);

@interface CCBRUndefinedStepsTracker_FeatureStepMap : NSObject {
 @public
  GherkinGherkinDialect *dialect_;
  id<JavaUtilMap> stepMap_;
}

- (instancetype __nonnull)initWithGherkinGherkinDialect:(GherkinGherkinDialect *)dialect
                                        withJavaUtilMap:(id<JavaUtilMap>)stepMap;

@end

J2OBJC_EMPTY_STATIC_INIT(CCBRUndefinedStepsTracker_FeatureStepMap)

J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker_FeatureStepMap, dialect_, GherkinGherkinDialect *)
J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker_FeatureStepMap, stepMap_, id<JavaUtilMap>)

__attribute__((unused)) static void CCBRUndefinedStepsTracker_FeatureStepMap_initWithGherkinGherkinDialect_withJavaUtilMap_(CCBRUndefinedStepsTracker_FeatureStepMap *self, GherkinGherkinDialect *dialect, id<JavaUtilMap> stepMap);

__attribute__((unused)) static CCBRUndefinedStepsTracker_FeatureStepMap *new_CCBRUndefinedStepsTracker_FeatureStepMap_initWithGherkinGherkinDialect_withJavaUtilMap_(GherkinGherkinDialect *dialect, id<JavaUtilMap> stepMap) NS_RETURNS_RETAINED;

__attribute__((unused)) static CCBRUndefinedStepsTracker_FeatureStepMap *create_CCBRUndefinedStepsTracker_FeatureStepMap_initWithGherkinGherkinDialect_withJavaUtilMap_(GherkinGherkinDialect *dialect, id<JavaUtilMap> stepMap);

J2OBJC_TYPE_LITERAL_HEADER(CCBRUndefinedStepsTracker_FeatureStepMap)

@interface CCBRUndefinedStepsTracker_StepNode : NSObject {
 @public
  GherkinAstStep *step_;
  CCBRUndefinedStepsTracker_StepNode *previous_;
}

- (instancetype __nonnull)initWithGherkinAstStep:(GherkinAstStep *)step
          withCCBRUndefinedStepsTracker_StepNode:(CCBRUndefinedStepsTracker_StepNode *)previous;

@end

J2OBJC_EMPTY_STATIC_INIT(CCBRUndefinedStepsTracker_StepNode)

J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker_StepNode, step_, GherkinAstStep *)
J2OBJC_FIELD_SETTER(CCBRUndefinedStepsTracker_StepNode, previous_, CCBRUndefinedStepsTracker_StepNode *)

__attribute__((unused)) static void CCBRUndefinedStepsTracker_StepNode_initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_(CCBRUndefinedStepsTracker_StepNode *self, GherkinAstStep *step, CCBRUndefinedStepsTracker_StepNode *previous);

__attribute__((unused)) static CCBRUndefinedStepsTracker_StepNode *new_CCBRUndefinedStepsTracker_StepNode_initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_(GherkinAstStep *step, CCBRUndefinedStepsTracker_StepNode *previous) NS_RETURNS_RETAINED;

__attribute__((unused)) static CCBRUndefinedStepsTracker_StepNode *create_CCBRUndefinedStepsTracker_StepNode_initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_(GherkinAstStep *step, CCBRUndefinedStepsTracker_StepNode *previous);

J2OBJC_TYPE_LITERAL_HEADER(CCBRUndefinedStepsTracker_StepNode)

@implementation CCBRUndefinedStepsTracker

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype __nonnull)init {
  CCBRUndefinedStepsTracker_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)setEventPublisherWithCucumberApiEventEventPublisher:(id<CucumberApiEventEventPublisher>)publisher {
  [((id<CucumberApiEventEventPublisher>) nil_chk(publisher)) registerHandlerForWithIOSClass:CucumberApiEventTestSourceRead_class_() withCucumberApiEventEventHandler:testSourceReadHandler_];
  [publisher registerHandlerForWithIOSClass:CucumberApiEventSnippetsSuggestedEvent_class_() withCucumberApiEventEventHandler:snippetsSuggestedHandler_];
}

- (jboolean)hasUndefinedSteps {
  return hasUndefinedSteps_;
}

- (id<JavaUtilList>)getSnippets {
  return snippets_;
}

- (void)handleSnippetsSuggestedWithNSString:(NSString *)uri
                           withJavaUtilList:(id<JavaUtilList>)stepLocations
                           withJavaUtilList:(id<JavaUtilList>)snippets {
  hasUndefinedSteps_ = true;
  NSString *keyword = CCBRUndefinedStepsTracker_givenWhenThenKeywordWithNSString_withJavaUtilList_(self, uri, stepLocations);
  for (NSString * __strong rawSnippet in nil_chk(snippets)) {
    NSString *snippet = [((NSString *) nil_chk(rawSnippet)) java_replace:@"**KEYWORD**" withSequence:keyword];
    if (![((id<JavaUtilList>) nil_chk(self->snippets_)) containsWithId:snippet]) {
      [self->snippets_ addWithId:snippet];
    }
  }
}

- (NSString *)givenWhenThenKeywordWithNSString:(NSString *)uri
                              withJavaUtilList:(id<JavaUtilList>)stepLocations {
  return CCBRUndefinedStepsTracker_givenWhenThenKeywordWithNSString_withJavaUtilList_(self, uri, stepLocations);
}

- (NSString *)getKeywordFromSourceWithNSString:(NSString *)path
                              withJavaUtilList:(id<JavaUtilList>)stepLocations {
  return CCBRUndefinedStepsTracker_getKeywordFromSourceWithNSString_withJavaUtilList_(self, path, stepLocations);
}

- (void)createFeatureStepMapWithNSString:(NSString *)path {
  CCBRUndefinedStepsTracker_createFeatureStepMapWithNSString_(self, path);
}

- (CCBRUndefinedStepsTracker_StepNode *)processScenarioDefinitionWithJavaUtilMap:(id<JavaUtilMap>)stepMap
                                          withCCBRUndefinedStepsTracker_StepNode:(CCBRUndefinedStepsTracker_StepNode *)initialPreviousNode
                                                withGherkinAstScenarioDefinition:(GherkinAstScenarioDefinition *)child {
  return CCBRUndefinedStepsTracker_processScenarioDefinitionWithJavaUtilMap_withCCBRUndefinedStepsTracker_StepNode_withGherkinAstScenarioDefinition_(self, stepMap, initialPreviousNode, child);
}

- (id<JavaUtilList>)getGivenWhenThenKeywordsWithGherkinGherkinDialect:(GherkinGherkinDialect *)dialect {
  return CCBRUndefinedStepsTracker_getGivenWhenThenKeywordsWithGherkinGherkinDialect_(self, dialect);
}

- (NSString *)getFirstGivenKeywordWithGherkinGherkinDialect:(GherkinGherkinDialect *)i18n {
  return CCBRUndefinedStepsTracker_getFirstGivenKeywordWithGherkinGherkinDialect_(self, i18n);
}

- (NSString *)convertToCodeKeywordWithNSString:(NSString *)keyword {
  return CCBRUndefinedStepsTracker_convertToCodeKeywordWithNSString_(self, keyword);
}

- (void)dealloc {
  RELEASE_(snippets_);
  RELEASE_(dialectProvider_);
  RELEASE_(pathToSourceMap_);
  RELEASE_(pathToStepMap_);
  RELEASE_(testSourceReadHandler_);
  RELEASE_(snippetsSuggestedHandler_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 1, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LJavaUtilList;", 0x1, -1, -1, -1, 2, -1, -1 },
    { NULL, "V", 0x0, 3, 4, -1, 5, -1, -1 },
    { NULL, "LNSString;", 0x2, 6, 7, -1, 8, -1, -1 },
    { NULL, "LNSString;", 0x2, 9, 7, -1, 8, -1, -1 },
    { NULL, "V", 0x2, 10, 11, -1, -1, -1, -1 },
    { NULL, "LCCBRUndefinedStepsTracker_StepNode;", 0x2, 12, 13, -1, 14, -1, -1 },
    { NULL, "LJavaUtilList;", 0x2, 15, 16, -1, 17, -1, -1 },
    { NULL, "LNSString;", 0x2, 18, 16, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x2, 19, 11, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(setEventPublisherWithCucumberApiEventEventPublisher:);
  methods[2].selector = @selector(hasUndefinedSteps);
  methods[3].selector = @selector(getSnippets);
  methods[4].selector = @selector(handleSnippetsSuggestedWithNSString:withJavaUtilList:withJavaUtilList:);
  methods[5].selector = @selector(givenWhenThenKeywordWithNSString:withJavaUtilList:);
  methods[6].selector = @selector(getKeywordFromSourceWithNSString:withJavaUtilList:);
  methods[7].selector = @selector(createFeatureStepMapWithNSString:);
  methods[8].selector = @selector(processScenarioDefinitionWithJavaUtilMap:withCCBRUndefinedStepsTracker_StepNode:withGherkinAstScenarioDefinition:);
  methods[9].selector = @selector(getGivenWhenThenKeywordsWithGherkinGherkinDialect:);
  methods[10].selector = @selector(getFirstGivenKeywordWithGherkinGherkinDialect:);
  methods[11].selector = @selector(convertToCodeKeywordWithNSString:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "snippets_", "LJavaUtilList;", .constantValue.asLong = 0, 0x12, -1, -1, 20, -1 },
    { "dialectProvider_", "LGherkinIGherkinDialectProvider;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "pathToSourceMap_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 21, -1 },
    { "pathToStepMap_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 22, -1 },
    { "hasUndefinedSteps_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "testSourceReadHandler_", "LCucumberApiEventEventHandler;", .constantValue.asLong = 0, 0x2, -1, -1, 23, -1 },
    { "snippetsSuggestedHandler_", "LCucumberApiEventEventHandler;", .constantValue.asLong = 0, 0x2, -1, -1, 24, -1 },
  };
  static const void *ptrTable[] = { "setEventPublisher", "LCucumberApiEventEventPublisher;", "()Ljava/util/List<Ljava/lang/String;>;", "handleSnippetsSuggested", "LNSString;LJavaUtilList;LJavaUtilList;", "(Ljava/lang/String;Ljava/util/List<Lgherkin/pickles/PickleLocation;>;Ljava/util/List<Ljava/lang/String;>;)V", "givenWhenThenKeyword", "LNSString;LJavaUtilList;", "(Ljava/lang/String;Ljava/util/List<Lgherkin/pickles/PickleLocation;>;)Ljava/lang/String;", "getKeywordFromSource", "createFeatureStepMap", "LNSString;", "processScenarioDefinition", "LJavaUtilMap;LCCBRUndefinedStepsTracker_StepNode;LGherkinAstScenarioDefinition;", "(Ljava/util/Map<Ljava/lang/Integer;Lcucumber/runtime/UndefinedStepsTracker$StepNode;>;Lcucumber/runtime/UndefinedStepsTracker$StepNode;Lgherkin/ast/ScenarioDefinition;)Lcucumber/runtime/UndefinedStepsTracker$StepNode;", "getGivenWhenThenKeywords", "LGherkinGherkinDialect;", "(Lgherkin/GherkinDialect;)Ljava/util/List<Ljava/lang/String;>;", "getFirstGivenKeyword", "convertToCodeKeyword", "Ljava/util/List<Ljava/lang/String;>;", "Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;", "Ljava/util/Map<Ljava/lang/String;Lcucumber/runtime/UndefinedStepsTracker$FeatureStepMap;>;", "Lcucumber/api/event/EventHandler<Lcucumber/api/event/TestSourceRead;>;", "Lcucumber/api/event/EventHandler<Lcucumber/api/event/SnippetsSuggestedEvent;>;", "LCCBRUndefinedStepsTracker_FeatureStepMap;LCCBRUndefinedStepsTracker_StepNode;" };
  static const J2ObjcClassInfo _CCBRUndefinedStepsTracker = { "UndefinedStepsTracker", "cucumber.runtime", ptrTable, methods, fields, 7, 0x1, 12, 7, -1, 25, -1, -1, -1 };
  return &_CCBRUndefinedStepsTracker;
}

@end

void CCBRUndefinedStepsTracker_init(CCBRUndefinedStepsTracker *self) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->snippets_, new_JavaUtilArrayList_init());
  JreStrongAssignAndConsume(&self->dialectProvider_, new_GherkinGherkinDialectProvider_init());
  JreStrongAssignAndConsume(&self->pathToSourceMap_, new_JavaUtilHashMap_init());
  JreStrongAssignAndConsume(&self->pathToStepMap_, new_JavaUtilHashMap_init());
  self->hasUndefinedSteps_ = false;
  JreStrongAssignAndConsume(&self->testSourceReadHandler_, new_CCBRUndefinedStepsTracker_1_initWithCCBRUndefinedStepsTracker_(self));
  JreStrongAssignAndConsume(&self->snippetsSuggestedHandler_, new_CCBRUndefinedStepsTracker_2_initWithCCBRUndefinedStepsTracker_(self));
}

CCBRUndefinedStepsTracker *new_CCBRUndefinedStepsTracker_init() {
  J2OBJC_NEW_IMPL(CCBRUndefinedStepsTracker, init)
}

CCBRUndefinedStepsTracker *create_CCBRUndefinedStepsTracker_init() {
  J2OBJC_CREATE_IMPL(CCBRUndefinedStepsTracker, init)
}

NSString *CCBRUndefinedStepsTracker_givenWhenThenKeywordWithNSString_withJavaUtilList_(CCBRUndefinedStepsTracker *self, NSString *uri, id<JavaUtilList> stepLocations) {
  NSString *keyword = nil;
  if (![((id<JavaUtilList>) nil_chk(stepLocations)) isEmpty]) {
    if ([((id<JavaUtilMap>) nil_chk(self->pathToSourceMap_)) containsKeyWithId:uri]) {
      keyword = CCBRUndefinedStepsTracker_getKeywordFromSourceWithNSString_withJavaUtilList_(self, uri, stepLocations);
    }
  }
  return keyword != nil ? keyword : CCBRUndefinedStepsTracker_getFirstGivenKeywordWithGherkinGherkinDialect_(self, [((id<GherkinIGherkinDialectProvider>) nil_chk(self->dialectProvider_)) getDefaultDialect]);
}

NSString *CCBRUndefinedStepsTracker_getKeywordFromSourceWithNSString_withJavaUtilList_(CCBRUndefinedStepsTracker *self, NSString *path, id<JavaUtilList> stepLocations) {
  if (![((id<JavaUtilMap>) nil_chk(self->pathToStepMap_)) containsKeyWithId:path]) {
    CCBRUndefinedStepsTracker_createFeatureStepMapWithNSString_(self, path);
  }
  if (![self->pathToStepMap_ containsKeyWithId:path]) {
    return nil;
  }
  GherkinGherkinDialect *featureDialect = ((CCBRUndefinedStepsTracker_FeatureStepMap *) nil_chk([self->pathToStepMap_ getWithId:path]))->dialect_;
  id<JavaUtilList> givenThenWhenKeywords = CCBRUndefinedStepsTracker_getGivenWhenThenKeywordsWithGherkinGherkinDialect_(self, featureDialect);
  id<JavaUtilMap> stepMap = ((CCBRUndefinedStepsTracker_FeatureStepMap *) nil_chk([self->pathToStepMap_ getWithId:path]))->stepMap_;
  for (GherkinPicklesPickleLocation * __strong stepLocation in nil_chk(stepLocations)) {
    if (![((id<JavaUtilMap>) nil_chk(stepMap)) containsKeyWithId:JavaLangInteger_valueOfWithInt_([((GherkinPicklesPickleLocation *) nil_chk(stepLocation)) getLine])]) {
      continue;
    }
    for (CCBRUndefinedStepsTracker_StepNode *stepNode = [stepMap getWithId:JavaLangInteger_valueOfWithInt_([stepLocation getLine])]; stepNode != nil; stepNode = stepNode->previous_) {
      for (NSString * __strong keyword in nil_chk(givenThenWhenKeywords)) {
        if (![((NSString *) nil_chk(keyword)) isEqual:@"* "] && keyword == [((GherkinAstStep *) nil_chk(stepNode->step_)) getKeyword]) {
          return CCBRUndefinedStepsTracker_convertToCodeKeywordWithNSString_(self, keyword);
        }
      }
    }
  }
  return CCBRUndefinedStepsTracker_getFirstGivenKeywordWithGherkinGherkinDialect_(self, featureDialect);
}

void CCBRUndefinedStepsTracker_createFeatureStepMapWithNSString_(CCBRUndefinedStepsTracker *self, NSString *path) {
  if (![((id<JavaUtilMap>) nil_chk(self->pathToSourceMap_)) containsKeyWithId:path]) {
    return;
  }
  GherkinParser *parser = create_GherkinParser_initWithGherkinParser_Builder_(create_GherkinAstBuilder_init());
  GherkinTokenMatcher *matcher = create_GherkinTokenMatcher_init();
  @try {
    GherkinAstGherkinDocument *gherkinDocument = [parser parseWithNSString:[self->pathToSourceMap_ getWithId:path] withGherkinParser_ITokenMatcher:matcher];
    id<JavaUtilMap> stepMap = create_JavaUtilHashMap_init();
    CCBRUndefinedStepsTracker_StepNode *initialPreviousNode = nil;
    for (GherkinAstScenarioDefinition * __strong child in nil_chk([((GherkinAstFeature *) nil_chk([((GherkinAstGherkinDocument *) nil_chk(gherkinDocument)) getFeature])) getChildren])) {
      CCBRUndefinedStepsTracker_StepNode *lastStepNode = CCBRUndefinedStepsTracker_processScenarioDefinitionWithJavaUtilMap_withCCBRUndefinedStepsTracker_StepNode_withGherkinAstScenarioDefinition_(self, stepMap, initialPreviousNode, child);
      if ([child isKindOfClass:[GherkinAstBackground class]]) {
        initialPreviousNode = lastStepNode;
      }
    }
    [((id<JavaUtilMap>) nil_chk(self->pathToStepMap_)) putWithId:path withId:create_CCBRUndefinedStepsTracker_FeatureStepMap_initWithGherkinGherkinDialect_withJavaUtilMap_([create_GherkinGherkinDialectProvider_initWithNSString_([((GherkinAstFeature *) nil_chk([gherkinDocument getFeature])) getLanguage]) getDefaultDialect], stepMap)];
  }
  @catch (GherkinParserException *e) {
  }
}

CCBRUndefinedStepsTracker_StepNode *CCBRUndefinedStepsTracker_processScenarioDefinitionWithJavaUtilMap_withCCBRUndefinedStepsTracker_StepNode_withGherkinAstScenarioDefinition_(CCBRUndefinedStepsTracker *self, id<JavaUtilMap> stepMap, CCBRUndefinedStepsTracker_StepNode *initialPreviousNode, GherkinAstScenarioDefinition *child) {
  CCBRUndefinedStepsTracker_StepNode *previousNode = initialPreviousNode;
  for (GherkinAstStep * __strong step in nil_chk([((GherkinAstScenarioDefinition *) nil_chk(child)) getSteps])) {
    CCBRUndefinedStepsTracker_StepNode *stepNode = create_CCBRUndefinedStepsTracker_StepNode_initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_(step, previousNode);
    [((id<JavaUtilMap>) nil_chk(stepMap)) putWithId:JavaLangInteger_valueOfWithInt_([((GherkinAstLocation *) nil_chk([((GherkinAstStep *) nil_chk(step)) getLocation])) getLine]) withId:stepNode];
    previousNode = stepNode;
  }
  return previousNode;
}

id<JavaUtilList> CCBRUndefinedStepsTracker_getGivenWhenThenKeywordsWithGherkinGherkinDialect_(CCBRUndefinedStepsTracker *self, GherkinGherkinDialect *dialect) {
  id<JavaUtilList> keywords = create_JavaUtilArrayList_init();
  [keywords addAllWithJavaUtilCollection:[((GherkinGherkinDialect *) nil_chk(dialect)) getGivenKeywords]];
  [keywords addAllWithJavaUtilCollection:[dialect getWhenKeywords]];
  [keywords addAllWithJavaUtilCollection:[dialect getThenKeywords]];
  return keywords;
}

NSString *CCBRUndefinedStepsTracker_getFirstGivenKeywordWithGherkinGherkinDialect_(CCBRUndefinedStepsTracker *self, GherkinGherkinDialect *i18n) {
  for (NSString * __strong keyword in nil_chk([((GherkinGherkinDialect *) nil_chk(i18n)) getGivenKeywords])) {
    if (![((NSString *) nil_chk(keyword)) isEqual:@"* "]) {
      return CCBRUndefinedStepsTracker_convertToCodeKeywordWithNSString_(self, keyword);
    }
  }
  return nil;
}

NSString *CCBRUndefinedStepsTracker_convertToCodeKeywordWithNSString_(CCBRUndefinedStepsTracker *self, NSString *keyword) {
  return [((NSString *) nil_chk(keyword)) java_replaceAll:@"[\\s',!]" withReplacement:@""];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRUndefinedStepsTracker)

@implementation CCBRUndefinedStepsTracker_1

- (instancetype __nonnull)initWithCCBRUndefinedStepsTracker:(CCBRUndefinedStepsTracker *)outer$ {
  CCBRUndefinedStepsTracker_1_initWithCCBRUndefinedStepsTracker_(self, outer$);
  return self;
}

- (void)receiveWithCucumberApiEventEvent:(CucumberApiEventTestSourceRead *)event {
  [((id<JavaUtilMap>) nil_chk(this$0_->pathToSourceMap_)) putWithId:((CucumberApiEventTestSourceRead *) nil_chk(event))->uri_ withId:event->source_];
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithCCBRUndefinedStepsTracker:);
  methods[1].selector = @selector(receiveWithCucumberApiEventEvent:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LCCBRUndefinedStepsTracker;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "receive", "LCucumberApiEventTestSourceRead;", "LCCBRUndefinedStepsTracker;", "Ljava/lang/Object;Lcucumber/api/event/EventHandler<Lcucumber/api/event/TestSourceRead;>;" };
  static const J2ObjcClassInfo _CCBRUndefinedStepsTracker_1 = { "", "cucumber.runtime", ptrTable, methods, fields, 7, 0x8018, 2, 1, 2, -1, -1, 3, -1 };
  return &_CCBRUndefinedStepsTracker_1;
}

@end

void CCBRUndefinedStepsTracker_1_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker_1 *self, CCBRUndefinedStepsTracker *outer$) {
  JreStrongAssign(&self->this$0_, outer$);
  NSObject_init(self);
}

CCBRUndefinedStepsTracker_1 *new_CCBRUndefinedStepsTracker_1_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker *outer$) {
  J2OBJC_NEW_IMPL(CCBRUndefinedStepsTracker_1, initWithCCBRUndefinedStepsTracker_, outer$)
}

CCBRUndefinedStepsTracker_1 *create_CCBRUndefinedStepsTracker_1_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker *outer$) {
  J2OBJC_CREATE_IMPL(CCBRUndefinedStepsTracker_1, initWithCCBRUndefinedStepsTracker_, outer$)
}

@implementation CCBRUndefinedStepsTracker_2

- (instancetype __nonnull)initWithCCBRUndefinedStepsTracker:(CCBRUndefinedStepsTracker *)outer$ {
  CCBRUndefinedStepsTracker_2_initWithCCBRUndefinedStepsTracker_(self, outer$);
  return self;
}

- (void)receiveWithCucumberApiEventEvent:(CucumberApiEventSnippetsSuggestedEvent *)event {
  [this$0_ handleSnippetsSuggestedWithNSString:((CucumberApiEventSnippetsSuggestedEvent *) nil_chk(event))->uri_ withJavaUtilList:event->stepLocations_ withJavaUtilList:event->snippets_];
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithCCBRUndefinedStepsTracker:);
  methods[1].selector = @selector(receiveWithCucumberApiEventEvent:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LCCBRUndefinedStepsTracker;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "receive", "LCucumberApiEventSnippetsSuggestedEvent;", "LCCBRUndefinedStepsTracker;", "Ljava/lang/Object;Lcucumber/api/event/EventHandler<Lcucumber/api/event/SnippetsSuggestedEvent;>;" };
  static const J2ObjcClassInfo _CCBRUndefinedStepsTracker_2 = { "", "cucumber.runtime", ptrTable, methods, fields, 7, 0x8018, 2, 1, 2, -1, -1, 3, -1 };
  return &_CCBRUndefinedStepsTracker_2;
}

@end

void CCBRUndefinedStepsTracker_2_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker_2 *self, CCBRUndefinedStepsTracker *outer$) {
  JreStrongAssign(&self->this$0_, outer$);
  NSObject_init(self);
}

CCBRUndefinedStepsTracker_2 *new_CCBRUndefinedStepsTracker_2_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker *outer$) {
  J2OBJC_NEW_IMPL(CCBRUndefinedStepsTracker_2, initWithCCBRUndefinedStepsTracker_, outer$)
}

CCBRUndefinedStepsTracker_2 *create_CCBRUndefinedStepsTracker_2_initWithCCBRUndefinedStepsTracker_(CCBRUndefinedStepsTracker *outer$) {
  J2OBJC_CREATE_IMPL(CCBRUndefinedStepsTracker_2, initWithCCBRUndefinedStepsTracker_, outer$)
}

@implementation CCBRUndefinedStepsTracker_FeatureStepMap

- (instancetype __nonnull)initWithGherkinGherkinDialect:(GherkinGherkinDialect *)dialect
                                        withJavaUtilMap:(id<JavaUtilMap>)stepMap {
  CCBRUndefinedStepsTracker_FeatureStepMap_initWithGherkinGherkinDialect_withJavaUtilMap_(self, dialect, stepMap);
  return self;
}

- (void)dealloc {
  RELEASE_(dialect_);
  RELEASE_(stepMap_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, 1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithGherkinGherkinDialect:withJavaUtilMap:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "dialect_", "LGherkinGherkinDialect;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "stepMap_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x10, -1, -1, 2, -1 },
  };
  static const void *ptrTable[] = { "LGherkinGherkinDialect;LJavaUtilMap;", "(Lgherkin/GherkinDialect;Ljava/util/Map<Ljava/lang/Integer;Lcucumber/runtime/UndefinedStepsTracker$StepNode;>;)V", "Ljava/util/Map<Ljava/lang/Integer;Lcucumber/runtime/UndefinedStepsTracker$StepNode;>;", "LCCBRUndefinedStepsTracker;" };
  static const J2ObjcClassInfo _CCBRUndefinedStepsTracker_FeatureStepMap = { "FeatureStepMap", "cucumber.runtime", ptrTable, methods, fields, 7, 0x1a, 1, 2, 3, -1, -1, -1, -1 };
  return &_CCBRUndefinedStepsTracker_FeatureStepMap;
}

@end

void CCBRUndefinedStepsTracker_FeatureStepMap_initWithGherkinGherkinDialect_withJavaUtilMap_(CCBRUndefinedStepsTracker_FeatureStepMap *self, GherkinGherkinDialect *dialect, id<JavaUtilMap> stepMap) {
  NSObject_init(self);
  JreStrongAssign(&self->dialect_, dialect);
  JreStrongAssign(&self->stepMap_, stepMap);
}

CCBRUndefinedStepsTracker_FeatureStepMap *new_CCBRUndefinedStepsTracker_FeatureStepMap_initWithGherkinGherkinDialect_withJavaUtilMap_(GherkinGherkinDialect *dialect, id<JavaUtilMap> stepMap) {
  J2OBJC_NEW_IMPL(CCBRUndefinedStepsTracker_FeatureStepMap, initWithGherkinGherkinDialect_withJavaUtilMap_, dialect, stepMap)
}

CCBRUndefinedStepsTracker_FeatureStepMap *create_CCBRUndefinedStepsTracker_FeatureStepMap_initWithGherkinGherkinDialect_withJavaUtilMap_(GherkinGherkinDialect *dialect, id<JavaUtilMap> stepMap) {
  J2OBJC_CREATE_IMPL(CCBRUndefinedStepsTracker_FeatureStepMap, initWithGherkinGherkinDialect_withJavaUtilMap_, dialect, stepMap)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRUndefinedStepsTracker_FeatureStepMap)

@implementation CCBRUndefinedStepsTracker_StepNode

- (instancetype __nonnull)initWithGherkinAstStep:(GherkinAstStep *)step
          withCCBRUndefinedStepsTracker_StepNode:(CCBRUndefinedStepsTracker_StepNode *)previous {
  CCBRUndefinedStepsTracker_StepNode_initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_(self, step, previous);
  return self;
}

- (void)dealloc {
  RELEASE_(step_);
  RELEASE_(previous_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithGherkinAstStep:withCCBRUndefinedStepsTracker_StepNode:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "step_", "LGherkinAstStep;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "previous_", "LCCBRUndefinedStepsTracker_StepNode;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LGherkinAstStep;LCCBRUndefinedStepsTracker_StepNode;", "LCCBRUndefinedStepsTracker;" };
  static const J2ObjcClassInfo _CCBRUndefinedStepsTracker_StepNode = { "StepNode", "cucumber.runtime", ptrTable, methods, fields, 7, 0x1a, 1, 2, 1, -1, -1, -1, -1 };
  return &_CCBRUndefinedStepsTracker_StepNode;
}

@end

void CCBRUndefinedStepsTracker_StepNode_initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_(CCBRUndefinedStepsTracker_StepNode *self, GherkinAstStep *step, CCBRUndefinedStepsTracker_StepNode *previous) {
  NSObject_init(self);
  JreStrongAssign(&self->step_, step);
  JreStrongAssign(&self->previous_, previous);
}

CCBRUndefinedStepsTracker_StepNode *new_CCBRUndefinedStepsTracker_StepNode_initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_(GherkinAstStep *step, CCBRUndefinedStepsTracker_StepNode *previous) {
  J2OBJC_NEW_IMPL(CCBRUndefinedStepsTracker_StepNode, initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_, step, previous)
}

CCBRUndefinedStepsTracker_StepNode *create_CCBRUndefinedStepsTracker_StepNode_initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_(GherkinAstStep *step, CCBRUndefinedStepsTracker_StepNode *previous) {
  J2OBJC_CREATE_IMPL(CCBRUndefinedStepsTracker_StepNode, initWithGherkinAstStep_withCCBRUndefinedStepsTracker_StepNode_, step, previous)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRUndefinedStepsTracker_StepNode)
