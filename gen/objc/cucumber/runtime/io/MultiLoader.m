//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/cucumber-jvm/core/src/main/java/cucumber/runtime/io/MultiLoader.java
//

#include "J2ObjC_source.h"
#include "cucumber/runtime/io/ClasspathResourceLoader.h"
#include "cucumber/runtime/io/FileResourceLoader.h"
#include "cucumber/runtime/io/MultiLoader.h"
#include "java/lang/ClassLoader.h"
#include "java/lang/Iterable.h"

@interface CCBRMultiLoader () {
 @public
  CCBRClasspathResourceLoader *classpath_;
  CCBRFileResourceLoader *fs_;
}

+ (jboolean)isClasspathPathWithNSString:(NSString *)path;

+ (NSString *)stripClasspathPrefixWithNSString:(NSString *)path;

@end

J2OBJC_FIELD_SETTER(CCBRMultiLoader, classpath_, CCBRClasspathResourceLoader *)
J2OBJC_FIELD_SETTER(CCBRMultiLoader, fs_, CCBRFileResourceLoader *)

__attribute__((unused)) static jboolean CCBRMultiLoader_isClasspathPathWithNSString_(NSString *path);

__attribute__((unused)) static NSString *CCBRMultiLoader_stripClasspathPrefixWithNSString_(NSString *path);

NSString *CCBRMultiLoader_CLASSPATH_SCHEME = @"classpath:";

@implementation CCBRMultiLoader

- (instancetype __nonnull)initWithJavaLangClassLoader:(JavaLangClassLoader *)classLoader {
  CCBRMultiLoader_initWithJavaLangClassLoader_(self, classLoader);
  return self;
}

- (id<JavaLangIterable>)resourcesWithNSString:(NSString *)path
                                 withNSString:(NSString *)suffix {
  if (CCBRMultiLoader_isClasspathPathWithNSString_(path)) {
    return [((CCBRClasspathResourceLoader *) nil_chk(classpath_)) resourcesWithNSString:CCBRMultiLoader_stripClasspathPrefixWithNSString_(path) withNSString:suffix];
  }
  else {
    return [((CCBRFileResourceLoader *) nil_chk(fs_)) resourcesWithNSString:path withNSString:suffix];
  }
}

+ (NSString *)packageNameWithNSString:(NSString *)gluePath {
  return CCBRMultiLoader_packageNameWithNSString_(gluePath);
}

+ (jboolean)isClasspathPathWithNSString:(NSString *)path {
  return CCBRMultiLoader_isClasspathPathWithNSString_(path);
}

+ (NSString *)stripClasspathPrefixWithNSString:(NSString *)path {
  return CCBRMultiLoader_stripClasspathPrefixWithNSString_(path);
}

- (void)dealloc {
  RELEASE_(classpath_);
  RELEASE_(fs_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "LJavaLangIterable;", 0x1, 1, 2, -1, 3, -1, -1 },
    { NULL, "LNSString;", 0x9, 4, 5, -1, -1, -1, -1 },
    { NULL, "Z", 0xa, 6, 5, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0xa, 7, 5, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithJavaLangClassLoader:);
  methods[1].selector = @selector(resourcesWithNSString:withNSString:);
  methods[2].selector = @selector(packageNameWithNSString:);
  methods[3].selector = @selector(isClasspathPathWithNSString:);
  methods[4].selector = @selector(stripClasspathPrefixWithNSString:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "CLASSPATH_SCHEME", "LNSString;", .constantValue.asLong = 0, 0x19, -1, 8, -1, -1 },
    { "classpath_", "LCCBRClasspathResourceLoader;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "fs_", "LCCBRFileResourceLoader;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LJavaLangClassLoader;", "resources", "LNSString;LNSString;", "(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/Iterable<Lcucumber/runtime/io/Resource;>;", "packageName", "LNSString;", "isClasspathPath", "stripClasspathPrefix", &CCBRMultiLoader_CLASSPATH_SCHEME };
  static const J2ObjcClassInfo _CCBRMultiLoader = { "MultiLoader", "cucumber.runtime.io", ptrTable, methods, fields, 7, 0x1, 5, 3, -1, -1, -1, -1, -1 };
  return &_CCBRMultiLoader;
}

@end

void CCBRMultiLoader_initWithJavaLangClassLoader_(CCBRMultiLoader *self, JavaLangClassLoader *classLoader) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->classpath_, new_CCBRClasspathResourceLoader_initWithJavaLangClassLoader_(classLoader));
  JreStrongAssignAndConsume(&self->fs_, new_CCBRFileResourceLoader_init());
}

CCBRMultiLoader *new_CCBRMultiLoader_initWithJavaLangClassLoader_(JavaLangClassLoader *classLoader) {
  J2OBJC_NEW_IMPL(CCBRMultiLoader, initWithJavaLangClassLoader_, classLoader)
}

CCBRMultiLoader *create_CCBRMultiLoader_initWithJavaLangClassLoader_(JavaLangClassLoader *classLoader) {
  J2OBJC_CREATE_IMPL(CCBRMultiLoader, initWithJavaLangClassLoader_, classLoader)
}

NSString *CCBRMultiLoader_packageNameWithNSString_(NSString *gluePath) {
  CCBRMultiLoader_initialize();
  if (CCBRMultiLoader_isClasspathPathWithNSString_(gluePath)) {
    gluePath = CCBRMultiLoader_stripClasspathPrefixWithNSString_(gluePath);
  }
  return [((NSString *) nil_chk([((NSString *) nil_chk(gluePath)) java_replace:'/' withChar:'.'])) java_replace:'\\' withChar:'.'];
}

jboolean CCBRMultiLoader_isClasspathPathWithNSString_(NSString *path) {
  CCBRMultiLoader_initialize();
  return [((NSString *) nil_chk(path)) java_hasPrefix:CCBRMultiLoader_CLASSPATH_SCHEME];
}

NSString *CCBRMultiLoader_stripClasspathPrefixWithNSString_(NSString *path) {
  CCBRMultiLoader_initialize();
  return [((NSString *) nil_chk(path)) java_substring:[((NSString *) nil_chk(CCBRMultiLoader_CLASSPATH_SCHEME)) java_length]];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRMultiLoader)
