//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/cucumber-jvm/core/src/main/java/cucumber/runtime/Runtime.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "cucumber/api/StepDefinitionReporter.h"
#include "cucumber/api/TypeRegistryConfigurer.h"
#include "cucumber/api/event/TestRunFinished.h"
#include "cucumber/runner/EventBus.h"
#include "cucumber/runner/Runner.h"
#include "cucumber/runner/TimeService.h"
#include "cucumber/runtime/Backend.h"
#include "cucumber/runtime/ClassFinder.h"
#include "cucumber/runtime/CucumberException.h"
#include "cucumber/runtime/DefaultTypeRegistryConfiguration.h"
#include "cucumber/runtime/ExitStatus.h"
#include "cucumber/runtime/Glue.h"
#include "cucumber/runtime/LinePredicate.h"
#include "cucumber/runtime/NamePredicate.h"
#include "cucumber/runtime/PicklePredicate.h"
#include "cucumber/runtime/Reflections.h"
#include "cucumber/runtime/Runtime.h"
#include "cucumber/runtime/RuntimeGlue.h"
#include "cucumber/runtime/RuntimeOptions.h"
#include "cucumber/runtime/TagPredicate.h"
#include "cucumber/runtime/io/MultiLoader.h"
#include "cucumber/runtime/io/ResourceLoader.h"
#include "cucumber/runtime/model/CucumberFeature.h"
#include "gherkin/ast/GherkinDocument.h"
#include "gherkin/events/PickleEvent.h"
#include "gherkin/pickles/Compiler.h"
#include "gherkin/pickles/Pickle.h"
#include "io/cucumber/stepexpression/TypeRegistry.h"
#include "java/lang/ClassLoader.h"
#include "java/lang/Long.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/Collections.h"
#include "java/util/List.h"
#include "java/util/Locale.h"
#include "java/util/Map.h"

@interface CCBRRuntime () {
 @public
  CCBRExitStatus *exitStatus_;
  CCBRRuntimeOptions *runtimeOptions_;
  id<CCBRResourceLoader> resourceLoader_;
  JavaLangClassLoader *classLoader_;
  CCBRunner *runner_;
  id<JavaUtilList> filters_;
  CCBEventBus *bus_;
  GHKCompiler *compiler_;
}

+ (id<JavaUtilCollection>)loadBackendsWithCCBRResourceLoader:(id<CCBRResourceLoader>)resourceLoader
                                         withCCBRClassFinder:(id<CCBRClassFinder>)classFinder
                                      withCCBRRuntimeOptions:(CCBRRuntimeOptions *)runtimeOptions;

@end

J2OBJC_FIELD_SETTER(CCBRRuntime, exitStatus_, CCBRExitStatus *)
J2OBJC_FIELD_SETTER(CCBRRuntime, runtimeOptions_, CCBRRuntimeOptions *)
J2OBJC_FIELD_SETTER(CCBRRuntime, resourceLoader_, id<CCBRResourceLoader>)
J2OBJC_FIELD_SETTER(CCBRRuntime, classLoader_, JavaLangClassLoader *)
J2OBJC_FIELD_SETTER(CCBRRuntime, runner_, CCBRunner *)
J2OBJC_FIELD_SETTER(CCBRRuntime, filters_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(CCBRRuntime, bus_, CCBEventBus *)
J2OBJC_FIELD_SETTER(CCBRRuntime, compiler_, GHKCompiler *)

__attribute__((unused)) static id<JavaUtilCollection> CCBRRuntime_loadBackendsWithCCBRResourceLoader_withCCBRClassFinder_withCCBRRuntimeOptions_(id<CCBRResourceLoader> resourceLoader, id<CCBRClassFinder> classFinder, CCBRRuntimeOptions *runtimeOptions);

@implementation CCBRRuntime

- (instancetype __nonnull)initWithCCBRResourceLoader:(id<CCBRResourceLoader>)resourceLoader
                                 withCCBRClassFinder:(id<CCBRClassFinder>)classFinder
                             withJavaLangClassLoader:(JavaLangClassLoader *)classLoader
                              withCCBRRuntimeOptions:(CCBRRuntimeOptions *)runtimeOptions {
  CCBRRuntime_initWithCCBRResourceLoader_withCCBRClassFinder_withJavaLangClassLoader_withCCBRRuntimeOptions_(self, resourceLoader, classFinder, classLoader, runtimeOptions);
  return self;
}

- (instancetype __nonnull)initWithCCBRResourceLoader:(id<CCBRResourceLoader>)resourceLoader
                             withJavaLangClassLoader:(JavaLangClassLoader *)classLoader
                              withJavaUtilCollection:(id<JavaUtilCollection>)backends
                              withCCBRRuntimeOptions:(CCBRRuntimeOptions *)runtimeOptions {
  CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_(self, resourceLoader, classLoader, backends, runtimeOptions);
  return self;
}

- (instancetype __nonnull)initWithCCBRResourceLoader:(id<CCBRResourceLoader>)resourceLoader
                             withJavaLangClassLoader:(JavaLangClassLoader *)classLoader
                              withJavaUtilCollection:(id<JavaUtilCollection>)backends
                              withCCBRRuntimeOptions:(CCBRRuntimeOptions *)runtimeOptions
                                        withCCBRGlue:(id<CCBRGlue>)optionalGlue {
  CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBRGlue_(self, resourceLoader, classLoader, backends, runtimeOptions, optionalGlue);
  return self;
}

- (instancetype __nonnull)initWithCCBRResourceLoader:(id<CCBRResourceLoader>)resourceLoader
                             withJavaLangClassLoader:(JavaLangClassLoader *)classLoader
                              withJavaUtilCollection:(id<JavaUtilCollection>)backends
                              withCCBRRuntimeOptions:(CCBRRuntimeOptions *)runtimeOptions
                                  withCCBTimeService:(id<CCBTimeService>)stopWatch
                                        withCCBRGlue:(id<CCBRGlue>)optionalGlue {
  CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBTimeService_withCCBRGlue_(self, resourceLoader, classLoader, backends, runtimeOptions, stopWatch, optionalGlue);
  return self;
}

+ (id<JavaUtilCollection>)loadBackendsWithCCBRResourceLoader:(id<CCBRResourceLoader>)resourceLoader
                                         withCCBRClassFinder:(id<CCBRClassFinder>)classFinder
                                      withCCBRRuntimeOptions:(CCBRRuntimeOptions *)runtimeOptions {
  return CCBRRuntime_loadBackendsWithCCBRResourceLoader_withCCBRClassFinder_withCCBRRuntimeOptions_(resourceLoader, classFinder, runtimeOptions);
}

- (void)run {
  id<JavaUtilList> features = [((CCBRRuntimeOptions *) nil_chk(runtimeOptions_)) cucumberFeaturesWithCCBRResourceLoader:resourceLoader_ withCCBEventBus:bus_];
  id<CucumberApiStepDefinitionReporter> stepDefinitionReporter = [runtimeOptions_ stepDefinitionReporterWithJavaLangClassLoader:classLoader_];
  [self reportStepDefinitionsWithCucumberApiStepDefinitionReporter:stepDefinitionReporter];
  for (CCBRCucumberFeature * __strong cucumberFeature in nil_chk(features)) {
    [self runFeatureWithCCBRCucumberFeature:cucumberFeature];
  }
  [((CCBEventBus *) nil_chk(bus_)) sendWithCucumberApiEventEvent:create_CucumberApiEventTestRunFinished_initWithJavaLangLong_([bus_ getTime])];
}

- (void)reportStepDefinitionsWithCucumberApiStepDefinitionReporter:(id<CucumberApiStepDefinitionReporter>)stepDefinitionReporter {
  [((CCBRunner *) nil_chk(runner_)) reportStepDefinitionsWithCucumberApiStepDefinitionReporter:stepDefinitionReporter];
}

- (void)runFeatureWithCCBRCucumberFeature:(CCBRCucumberFeature *)feature {
  id<JavaUtilList> pickleEvents = [self compileFeatureWithCCBRCucumberFeature:feature];
  for (GHKPickleEvent * __strong pickleEvent in nil_chk(pickleEvents)) {
    if ([self matchesFiltersWithGHKPickleEvent:pickleEvent]) {
      [((CCBRunner *) nil_chk(runner_)) runPickleWithGHKPickleEvent:pickleEvent];
    }
  }
}

- (id<JavaUtilList>)compileFeatureWithCCBRCucumberFeature:(CCBRCucumberFeature *)feature {
  id<JavaUtilList> pickleEvents = create_JavaUtilArrayList_init();
  for (GHKPickle * __strong pickle in nil_chk([((GHKCompiler *) nil_chk(compiler_)) compileWithGHKAGherkinDocument:[((CCBRCucumberFeature *) nil_chk(feature)) getGherkinFeature]])) {
    [pickleEvents addWithId:create_GHKPickleEvent_initWithNSString_withGHKPickle_([feature getUri], pickle)];
  }
  return pickleEvents;
}

- (jboolean)matchesFiltersWithGHKPickleEvent:(GHKPickleEvent *)pickleEvent {
  for (id<CCBRPicklePredicate> __strong filter in nil_chk(filters_)) {
    if (![((id<CCBRPicklePredicate>) nil_chk(filter)) applyWithGHKPickleEvent:pickleEvent]) {
      return false;
    }
  }
  return true;
}

- (jbyte)exitStatus {
  return [((CCBRExitStatus *) nil_chk(exitStatus_)) exitStatusWithBoolean:[((CCBRRuntimeOptions *) nil_chk(runtimeOptions_)) isStrict]];
}

- (id<CCBRGlue>)getGlue {
  return [((CCBRunner *) nil_chk(runner_)) getGlue];
}

- (CCBEventBus *)getEventBus {
  return bus_;
}

- (CCBRunner *)getRunner {
  return runner_;
}

- (void)dealloc {
  RELEASE_(exitStatus_);
  RELEASE_(runtimeOptions_);
  RELEASE_(resourceLoader_);
  RELEASE_(classLoader_);
  RELEASE_(runner_);
  RELEASE_(filters_);
  RELEASE_(bus_);
  RELEASE_(compiler_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 1, -1, 2, -1, -1 },
    { NULL, NULL, 0x1, -1, 3, -1, 4, -1, -1 },
    { NULL, NULL, 0x1, -1, 5, -1, 6, -1, -1 },
    { NULL, "LJavaUtilCollection;", 0xa, 7, 8, -1, 9, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 10, 11, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 12, 13, -1, -1, -1, -1 },
    { NULL, "LJavaUtilList;", 0x1, 14, 13, -1, 15, -1, -1 },
    { NULL, "Z", 0x1, 16, 17, -1, -1, -1, -1 },
    { NULL, "B", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LCCBRGlue;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LCCBEventBus;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LCCBRunner;", 0x1, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithCCBRResourceLoader:withCCBRClassFinder:withJavaLangClassLoader:withCCBRRuntimeOptions:);
  methods[1].selector = @selector(initWithCCBRResourceLoader:withJavaLangClassLoader:withJavaUtilCollection:withCCBRRuntimeOptions:);
  methods[2].selector = @selector(initWithCCBRResourceLoader:withJavaLangClassLoader:withJavaUtilCollection:withCCBRRuntimeOptions:withCCBRGlue:);
  methods[3].selector = @selector(initWithCCBRResourceLoader:withJavaLangClassLoader:withJavaUtilCollection:withCCBRRuntimeOptions:withCCBTimeService:withCCBRGlue:);
  methods[4].selector = @selector(loadBackendsWithCCBRResourceLoader:withCCBRClassFinder:withCCBRRuntimeOptions:);
  methods[5].selector = @selector(run);
  methods[6].selector = @selector(reportStepDefinitionsWithCucumberApiStepDefinitionReporter:);
  methods[7].selector = @selector(runFeatureWithCCBRCucumberFeature:);
  methods[8].selector = @selector(compileFeatureWithCCBRCucumberFeature:);
  methods[9].selector = @selector(matchesFiltersWithGHKPickleEvent:);
  methods[10].selector = @selector(exitStatus);
  methods[11].selector = @selector(getGlue);
  methods[12].selector = @selector(getEventBus);
  methods[13].selector = @selector(getRunner);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "exitStatus_", "LCCBRExitStatus;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "runtimeOptions_", "LCCBRRuntimeOptions;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "resourceLoader_", "LCCBRResourceLoader;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "classLoader_", "LJavaLangClassLoader;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "runner_", "LCCBRunner;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "filters_", "LJavaUtilList;", .constantValue.asLong = 0, 0x12, -1, -1, 18, -1 },
    { "bus_", "LCCBEventBus;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "compiler_", "LGHKCompiler;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LCCBRResourceLoader;LCCBRClassFinder;LJavaLangClassLoader;LCCBRRuntimeOptions;", "LCCBRResourceLoader;LJavaLangClassLoader;LJavaUtilCollection;LCCBRRuntimeOptions;", "(Lcucumber/runtime/io/ResourceLoader;Ljava/lang/ClassLoader;Ljava/util/Collection<+Lcucumber/runtime/Backend;>;Lcucumber/runtime/RuntimeOptions;)V", "LCCBRResourceLoader;LJavaLangClassLoader;LJavaUtilCollection;LCCBRRuntimeOptions;LCCBRGlue;", "(Lcucumber/runtime/io/ResourceLoader;Ljava/lang/ClassLoader;Ljava/util/Collection<+Lcucumber/runtime/Backend;>;Lcucumber/runtime/RuntimeOptions;Lcucumber/runtime/Glue;)V", "LCCBRResourceLoader;LJavaLangClassLoader;LJavaUtilCollection;LCCBRRuntimeOptions;LCCBTimeService;LCCBRGlue;", "(Lcucumber/runtime/io/ResourceLoader;Ljava/lang/ClassLoader;Ljava/util/Collection<+Lcucumber/runtime/Backend;>;Lcucumber/runtime/RuntimeOptions;Lcucumber/runner/TimeService;Lcucumber/runtime/Glue;)V", "loadBackends", "LCCBRResourceLoader;LCCBRClassFinder;LCCBRRuntimeOptions;", "(Lcucumber/runtime/io/ResourceLoader;Lcucumber/runtime/ClassFinder;Lcucumber/runtime/RuntimeOptions;)Ljava/util/Collection<+Lcucumber/runtime/Backend;>;", "reportStepDefinitions", "LCucumberApiStepDefinitionReporter;", "runFeature", "LCCBRCucumberFeature;", "compileFeature", "(Lcucumber/runtime/model/CucumberFeature;)Ljava/util/List<Lgherkin/events/PickleEvent;>;", "matchesFilters", "LGHKPickleEvent;", "Ljava/util/List<Lcucumber/runtime/PicklePredicate;>;" };
  static const J2ObjcClassInfo _CCBRRuntime = { "Runtime", "cucumber.runtime", ptrTable, methods, fields, 7, 0x1, 14, 8, -1, -1, -1, -1, -1 };
  return &_CCBRRuntime;
}

@end

void CCBRRuntime_initWithCCBRResourceLoader_withCCBRClassFinder_withJavaLangClassLoader_withCCBRRuntimeOptions_(CCBRRuntime *self, id<CCBRResourceLoader> resourceLoader, id<CCBRClassFinder> classFinder, JavaLangClassLoader *classLoader, CCBRRuntimeOptions *runtimeOptions) {
  CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_(self, resourceLoader, classLoader, CCBRRuntime_loadBackendsWithCCBRResourceLoader_withCCBRClassFinder_withCCBRRuntimeOptions_(resourceLoader, classFinder, runtimeOptions), runtimeOptions);
}

CCBRRuntime *new_CCBRRuntime_initWithCCBRResourceLoader_withCCBRClassFinder_withJavaLangClassLoader_withCCBRRuntimeOptions_(id<CCBRResourceLoader> resourceLoader, id<CCBRClassFinder> classFinder, JavaLangClassLoader *classLoader, CCBRRuntimeOptions *runtimeOptions) {
  J2OBJC_NEW_IMPL(CCBRRuntime, initWithCCBRResourceLoader_withCCBRClassFinder_withJavaLangClassLoader_withCCBRRuntimeOptions_, resourceLoader, classFinder, classLoader, runtimeOptions)
}

CCBRRuntime *create_CCBRRuntime_initWithCCBRResourceLoader_withCCBRClassFinder_withJavaLangClassLoader_withCCBRRuntimeOptions_(id<CCBRResourceLoader> resourceLoader, id<CCBRClassFinder> classFinder, JavaLangClassLoader *classLoader, CCBRRuntimeOptions *runtimeOptions) {
  J2OBJC_CREATE_IMPL(CCBRRuntime, initWithCCBRResourceLoader_withCCBRClassFinder_withJavaLangClassLoader_withCCBRRuntimeOptions_, resourceLoader, classFinder, classLoader, runtimeOptions)
}

void CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_(CCBRRuntime *self, id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions) {
  CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBTimeService_withCCBRGlue_(self, resourceLoader, classLoader, backends, runtimeOptions, JreLoadStatic(CCBTimeService, SYSTEM), nil);
}

CCBRRuntime *new_CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_(id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions) {
  J2OBJC_NEW_IMPL(CCBRRuntime, initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_, resourceLoader, classLoader, backends, runtimeOptions)
}

CCBRRuntime *create_CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_(id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions) {
  J2OBJC_CREATE_IMPL(CCBRRuntime, initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_, resourceLoader, classLoader, backends, runtimeOptions)
}

void CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBRGlue_(CCBRRuntime *self, id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions, id<CCBRGlue> optionalGlue) {
  CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBTimeService_withCCBRGlue_(self, resourceLoader, classLoader, backends, runtimeOptions, JreLoadStatic(CCBTimeService, SYSTEM), optionalGlue);
}

CCBRRuntime *new_CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBRGlue_(id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions, id<CCBRGlue> optionalGlue) {
  J2OBJC_NEW_IMPL(CCBRRuntime, initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBRGlue_, resourceLoader, classLoader, backends, runtimeOptions, optionalGlue)
}

CCBRRuntime *create_CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBRGlue_(id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions, id<CCBRGlue> optionalGlue) {
  J2OBJC_CREATE_IMPL(CCBRRuntime, initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBRGlue_, resourceLoader, classLoader, backends, runtimeOptions, optionalGlue)
}

void CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBTimeService_withCCBRGlue_(CCBRRuntime *self, id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions, id<CCBTimeService> stopWatch, id<CCBRGlue> optionalGlue) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->exitStatus_, new_CCBRExitStatus_init());
  JreStrongAssignAndConsume(&self->compiler_, new_GHKCompiler_init());
  if ([((id<JavaUtilCollection>) nil_chk(backends)) isEmpty]) {
    @throw create_CCBRCucumberException_initWithNSString_(@"No backends were found. Please make sure you have a backend module on your CLASSPATH.");
  }
  JreStrongAssign(&self->resourceLoader_, resourceLoader);
  JreStrongAssign(&self->classLoader_, classLoader);
  JreStrongAssign(&self->runtimeOptions_, runtimeOptions);
  id<CCBRGlue> glue;
  glue = optionalGlue == nil ? create_CCBRRuntimeGlue_init() : optionalGlue;
  JreStrongAssignAndConsume(&self->bus_, new_CCBEventBus_initWithCCBTimeService_(stopWatch));
  JreStrongAssignAndConsume(&self->runner_, new_CCBRunner_initWithCCBRGlue_withCCBEventBus_withJavaUtilCollection_withCCBRRuntimeOptions_(glue, self->bus_, backends, runtimeOptions));
  JreStrongAssignAndConsume(&self->filters_, new_JavaUtilArrayList_init());
  id<JavaUtilList> tagFilters = [((CCBRRuntimeOptions *) nil_chk(runtimeOptions)) getTagFilters];
  if (![((id<JavaUtilList>) nil_chk(tagFilters)) isEmpty]) {
    [self->filters_ addWithId:create_CCBRTagPredicate_initWithJavaUtilList_(tagFilters)];
  }
  id<JavaUtilList> nameFilters = [runtimeOptions getNameFilters];
  if (![((id<JavaUtilList>) nil_chk(nameFilters)) isEmpty]) {
    [self->filters_ addWithId:create_CCBRNamePredicate_initWithJavaUtilList_(nameFilters)];
  }
  id<JavaUtilMap> lineFilters = [runtimeOptions getLineFiltersWithCCBRResourceLoader:resourceLoader];
  if (![((id<JavaUtilMap>) nil_chk(lineFilters)) isEmpty]) {
    [self->filters_ addWithId:create_CCBRLinePredicate_initWithJavaUtilMap_(lineFilters)];
  }
  [self->exitStatus_ setEventPublisherWithCucumberApiEventEventPublisher:self->bus_];
  [runtimeOptions setEventBusWithCCBEventBus:self->bus_];
}

CCBRRuntime *new_CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBTimeService_withCCBRGlue_(id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions, id<CCBTimeService> stopWatch, id<CCBRGlue> optionalGlue) {
  J2OBJC_NEW_IMPL(CCBRRuntime, initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBTimeService_withCCBRGlue_, resourceLoader, classLoader, backends, runtimeOptions, stopWatch, optionalGlue)
}

CCBRRuntime *create_CCBRRuntime_initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBTimeService_withCCBRGlue_(id<CCBRResourceLoader> resourceLoader, JavaLangClassLoader *classLoader, id<JavaUtilCollection> backends, CCBRRuntimeOptions *runtimeOptions, id<CCBTimeService> stopWatch, id<CCBRGlue> optionalGlue) {
  J2OBJC_CREATE_IMPL(CCBRRuntime, initWithCCBRResourceLoader_withJavaLangClassLoader_withJavaUtilCollection_withCCBRRuntimeOptions_withCCBTimeService_withCCBRGlue_, resourceLoader, classLoader, backends, runtimeOptions, stopWatch, optionalGlue)
}

id<JavaUtilCollection> CCBRRuntime_loadBackendsWithCCBRResourceLoader_withCCBRClassFinder_withCCBRRuntimeOptions_(id<CCBRResourceLoader> resourceLoader, id<CCBRClassFinder> classFinder, CCBRRuntimeOptions *runtimeOptions) {
  CCBRRuntime_initialize();
  CCBRReflections *reflections = create_CCBRReflections_initWithCCBRClassFinder_(classFinder);
  id<CucumberApiTypeRegistryConfigurer> typeRegistryConfigurer = [reflections instantiateExactlyOneSubclassWithIOSClass:CucumberApiTypeRegistryConfigurer_class_() withJavaUtilList:CCBRMultiLoader_packageNameWithJavaUtilList_([((CCBRRuntimeOptions *) nil_chk(runtimeOptions)) getGlue]) withIOSClassArray:[IOSObjectArray arrayWithLength:0 type:IOSClass_class_()] withNSObjectArray:[IOSObjectArray arrayWithLength:0 type:NSObject_class_()] withId:create_CCBRDefaultTypeRegistryConfiguration_init()];
  IoCucumberStepexpressionTypeRegistry *typeRegistry = create_IoCucumberStepexpressionTypeRegistry_initWithJavaUtilLocale_([((id<CucumberApiTypeRegistryConfigurer>) nil_chk(typeRegistryConfigurer)) locale]);
  [typeRegistryConfigurer configureTypeRegistryWithCucumberApiTypeRegistry:typeRegistry];
  return [reflections instantiateSubclassesWithIOSClass:CCBRBackend_class_() withJavaUtilList:JavaUtilCollections_singletonListWithId_(@"cucumber.runtime") withIOSClassArray:[IOSObjectArray arrayWithObjects:(id[]){ CCBRResourceLoader_class_(), IoCucumberStepexpressionTypeRegistry_class_() } count:2 type:IOSClass_class_()] withNSObjectArray:[IOSObjectArray arrayWithObjects:(id[]){ resourceLoader, typeRegistry } count:2 type:NSObject_class_()]];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(CCBRRuntime)
